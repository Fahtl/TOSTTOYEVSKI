<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tosttoo | GeliÅŸmiÅŸ Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    color: #fff;
    min-height: 100vh;
}

/* Ø§Ù„Ù‡ÙŠØ±Ùˆ Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
.hero {
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    position: relative;
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                url('https://i.postimg.cc/k5TwQCVb/hero.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}

.hero h1 {
    font-size: 80px;
    color: #ff8c00;
    margin: 0;
    cursor: pointer;
    text-shadow: 0 0 20px rgba(255,140,0,0.5);
}

.work-time {
    font-size: 20px;
    margin: 20px 0;
    padding: 10px 20px;
    background: rgba(0,0,0,0.6);
    border-radius: 30px;
    border: 1px solid #ff8c00;
    backdrop-filter: blur(5px);
}

.price-container {
    margin: 20px 0;
    font-size: 28px;
    background: rgba(0,0,0,0.7);
    padding: 15px 30px;
    border-radius: 50px;
    border: 1px solid #ff8c00;
    backdrop-filter: blur(5px);
}

#price {
    color: #ff8c00;
    font-weight: bold;
    font-size: 32px;
}

.btn {
    background: #ff8c00;
    border: none;
    padding: 15px 40px;
    color: #fff;
    font-size: 18px;
    font-weight: 600;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(255,140,0,0.5);
}

/* Ø§Ù„Ù…Ù†ÙŠÙˆ */
.container {
    padding: 50px 20px;
    max-width: 1000px;
    margin: 0 auto;
}

.container h2 {
    font-size: 40px;
    color: #ff8c00;
    text-align: center;
    margin-bottom: 40px;
}

.card {
    background: rgba(30, 30, 30, 0.9);
    backdrop-filter: blur(10px);
    padding: 30px;
    border-radius: 20px;
    margin-top: 30px;
    border: 1px solid rgba(255,140,0,0.3);
}

.card h3 {
    color: #ff8c00;
    font-size: 28px;
    margin-bottom: 20px;
    text-align: center;
    border-bottom: 2px solid #ff8c00;
    padding-bottom: 10px;
}

.item {
    display: flex;
    justify-content: space-between;
    margin: 15px 0;
    padding: 10px 20px;
    background: rgba(0,0,0,0.4);
    border-radius: 10px;
}

.name {
    color: #ff8c00;
    font-weight: 600;
}

/* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© */
.dev-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(10, 10, 10, 0.98);
    backdrop-filter: blur(20px);
    padding: 30px;
    border: 3px solid #ff8c00;
    border-radius: 20px;
    display: none;
    z-index: 1000;
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 30px 60px rgba(255,140,0,0.3);
    animation: panelSlide 0.3s ease;
}

@keyframes panelSlide {
    from {
        opacity: 0;
        transform: translate(-50%, -40%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

.dev-panel h3 {
    color: #ff8c00;
    font-size: 32px;
    text-align: center;
    margin-bottom: 25px;
    border-bottom: 2px solid #ff8c00;
    padding-bottom: 15px;
}

.dev-section {
    margin: 20px 0;
    padding: 20px;
    background: rgba(255,140,0,0.1);
    border-radius: 15px;
    border: 1px solid #ff8c00;
    position: relative;
    transition: all 0.3s ease;
}

.dev-section:hover {
    background: rgba(255,140,0,0.15);
    transform: scale(1.02);
}

.dev-section h4 {
    color: #ff8c00;
    margin-bottom: 15px;
    font-size: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.dev-section h4 i {
    font-size: 24px;
}

.dev-panel input,
.dev-panel select,
.dev-panel textarea {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    background: rgba(0,0,0,0.7);
    border: 2px solid #333;
    color: #fff;
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s ease;
}

.dev-panel input:focus,
.dev-panel select:focus,
.dev-panel textarea:focus {
    border-color: #ff8c00;
    outline: none;
    box-shadow: 0 0 15px rgba(255,140,0,0.5);
}

.dev-panel button {
    width: 100%;
    padding: 14px;
    margin: 8px 0;
    background: #ff8c00;
    border: none;
    color: #fff;
    font-weight: bold;
    border-radius: 10px;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    font-size: 16px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.dev-panel button:hover {
    background: #ffa233;
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(255,140,0,0.6);
}

.dev-panel button:active {
    transform: translateY(0);
}

.dev-panel .save-btn {
    background: #28a745;
}

.dev-panel .save-btn:hover {
    background: #34ce57;
}

.dev-panel .delete-btn {
    background: #dc3545;
}

.dev-panel .delete-btn:hover {
    background: #ff4757;
}

.dev-panel .close-btn {
    background: #6c757d;
    margin-top: 20px;
}

.dev-panel .close-btn:hover {
    background: #5a6268;
}

/* Ø²Ø± F1 Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ */
.f1-hint {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255,140,0,0.2);
    border: 1px solid #ff8c00;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 14px;
    color: #ff8c00;
    backdrop-filter: blur(5px);
    z-index: 998;
    opacity: 0.7;
    transition: all 0.3s ease;
}

.f1-hint:hover {
    opacity: 1;
    transform: scale(1.05);
}

/* Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© */
.status-message {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 25px;
    border-radius: 10px;
    background: rgba(0,0,0,0.9);
    border: 2px solid;
    color: #fff;
    font-weight: 600;
    z-index: 2000;
    animation: slideInRight 0.3s ease;
}

.status-success {
    border-color: #28a745;
    box-shadow: 0 0 20px rgba(40,167,69,0.3);
}

.status-error {
    border-color: #dc3545;
    box-shadow: 0 0 20px rgba(220,53,69,0.3);
}

.status-loading {
    border-color: #ff8c00;
    box-shadow: 0 0 20px rgba(255,140,0,0.3);
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: #ff8c00;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø°Ù */
.delete-mode .item {
    cursor: pointer;
    position: relative;
}

.delete-mode .item:hover {
    background: rgba(255,0,0,0.2);
    border: 1px solid red;
}

.delete-mode .item:hover::after {
    content: 'ğŸ—‘ï¸ Sil';
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: red;
    font-size: 14px;
}

/* ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
.edit-mode .item-price {
    cursor: text;
    background: rgba(255,140,0,0.2);
    padding: 2px 8px;
    border-radius: 5px;
    border: 1px dashed #ff8c00;
}

/* Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.9);
    backdrop-filter: blur(8px);
    display: none;
    z-index: 999;
}

/* Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ */
.confirm-dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(20,20,20,0.98);
    padding: 30px;
    border-radius: 20px;
    border: 3px solid #ff8c00;
    z-index: 2000;
    text-align: center;
    min-width: 300px;
    animation: fadeIn 0.3s ease;
}

.confirm-dialog p {
    margin-bottom: 20px;
    font-size: 18px;
}

.confirm-dialog button {
    margin: 0 10px;
    padding: 10px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

.confirm-yes {
    background: #28a745;
    color: #fff;
}

.confirm-no {
    background: #dc3545;
    color: #fff;
}
</style>
</head>

<body>

<!-- ØªÙ„Ù…ÙŠØ­ F1 -->
<div class="f1-hint" id="f1Hint">
    ğŸš€ F1 - GeliÅŸtirici Paneli
</div>

<!-- Ø§Ù„Ù‡ÙŠØ±Ùˆ -->
<section class="hero">
    <h1 id="logo">Tosttoo</h1>
    <div class="work-time">ğŸ•’ 08:00 - 02:30</div>
    <div class="price-container">
        ğŸ’° Fiyat: <span id="price">YÃ¼kleniyor...</span> â‚º
    </div>
    <button class="btn" onclick="scrollToMenu()">MenÃ¼yÃ¼ GÃ¶r</button>
</section>

<!-- Ø§Ù„Ù…Ù†ÙŠÙˆ -->
<div class="container" id="menu">
    <h2>ğŸ½ï¸ MenÃ¼</h2>
    
    <div class="card" id="card1">
        <h3>ğŸ¥ª Tostlar</h3>
        <div class="item"><span class="name">KaÅŸarlÄ± Tost</span><span class="item-price">60â‚º</span></div>
        <div class="item"><span class="name">Sucuklu Tost</span><span class="item-price">75â‚º</span></div>
        <div class="item"><span class="name">KarÄ±ÅŸÄ±k Tost</span><span class="item-price">85â‚º</span></div>
    </div>
    
    <div class="card" id="card2">
        <h3>ğŸ¥¤ Ä°Ã§ecekler</h3>
        <div class="item"><span class="name">Ã‡ay</span><span class="item-price">10â‚º</span></div>
        <div class="item"><span class="name">Kahve</span><span class="item-price">15â‚º</span></div>
        <div class="item"><span class="name">Meyve Suyu</span><span class="item-price">20â‚º</span></div>
    </div>
    
    <div class="card" id="card3">
        <h3>ğŸ° TatlÄ±lar</h3>
        <div class="item"><span class="name">KÃ¼nefe</span><span class="item-price">50â‚º</span></div>
        <div class="item"><span class="name">Baklava</span><span class="item-price">45â‚º</span></div>
        <div class="item"><span class="name">SÃ¼tlaÃ§</span><span class="item-price">30â‚º</span></div>
    </div>
</div>

<!-- Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© -->
<div class="overlay" id="overlay"></div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© -->
<div class="dev-panel" id="devPanel">
    <h3>âš™ï¸ GeliÅŸtirici Paneli</h3>
    
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø³Ø¹Ø± - ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© -->
    <div class="dev-section" id="priceSection">
        <h4><i>ğŸ’°</i> Fiyat DÃ¼zenle</h4>
        <input type="number" id="newPrice" placeholder="Yeni fiyat girin">
        <button onclick="updateMainPrice()" class="save-btn">ğŸ’¾ FiyatÄ± Kaydet</button>
        <button onclick="hidePriceSection()">ğŸ‘ï¸ BÃ¶lÃ¼mÃ¼ Gizle</button>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ -->
    <div class="dev-section">
        <h4><i>â•</i> ÃœrÃ¼n Ekle</h4>
        <select id="categorySelect"></select>
        <input type="text" id="productName" placeholder="ÃœrÃ¼n adÄ±">
        <input type="text" id="productPrice" placeholder="Fiyat">
        <button onclick="addProduct()" class="save-btn">âœ… ÃœrÃ¼n Ekle</button>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ùƒategoria -->
    <div class="dev-section">
        <h4><i>ğŸ“</i> Kategori Ekle</h4>
        <input type="text" id="newCategory" placeholder="Yeni kategori adÄ±">
        <button onclick="addCategory()" class="save-btn">ğŸ“ Kategori Ekle</button>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª -->
    <div class="dev-section">
        <h4><i>ğŸ”§</i> AraÃ§lar</h4>
        <button onclick="toggleDeleteMode()">ğŸ—‘ï¸ Silme Modu</button>
        <button onclick="toggleEditMode()">âœï¸ DÃ¼zenleme Modu</button>
        <button onclick="updateInstagram()">ğŸ“· Instagram GÃ¼ncelle</button>
        <button onclick="updateLocation()">ğŸ“ Konum GÃ¼ncelle</button>
    </div>
    
    <!-- Ù‚Ø³Ù… Supabase -->
    <div class="dev-section">
        <h4><i>ğŸ’¾</i> Supabase</h4>
        <button onclick="saveAllToSupabase()" class="save-btn">ğŸ’¾ TÃ¼mÃ¼nÃ¼ Kaydet</button>
        <button onclick="loadFromSupabase()">ğŸ”„ Verileri YÃ¼kle</button>
        <div id="syncStatus" style="text-align: center; margin-top: 10px;"></div>
    </div>
    
    <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
    <button class="close-btn" onclick="closeDev()">âŒ Kapat</button>
</div>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// ========== SUPABASE KONFÄ°GÃœRASYONU ==========
const supabaseUrl = "https://cufbyiefzbgygtyibupl.supabase.co";
const supabaseKey = "sb_publishable_mTI9Fl-eMcN3TbLqyQAGNw_fzQF7ssr";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// ========== DEÄÄ°ÅKENLER ==========
let isDeveloper = false;
let deleteMode = false;
let editMode = false;
const SECRET_PASSWORD = "momotunc0702";

// ========== F1 TUÅU Ä°LE GÄ°RÄ°Å ==========
document.addEventListener('keydown', function(e) {
    if(e.key === 'F1') {
        e.preventDefault(); // F1'in varsayÄ±lan yardÄ±mÄ±nÄ± engelle
        
        if(!isDeveloper) {
            let password = prompt("ğŸ” GeliÅŸtirici ÅŸifresini girin:");
            if(password === SECRET_PASSWORD) {
                openDev();
                showStatus("âœ… GeliÅŸtirici paneline hoÅŸ geldiniz!", "success");
            } else {
                showStatus("âŒ YanlÄ±ÅŸ ÅŸifre!", "error");
            }
        } else {
            closeDev();
        }
    }
});

// ========== TEMEL FONKSÄ°YONLAR ==========
function scrollToMenu() {
    document.getElementById("menu").scrollIntoView({behavior: "smooth"});
}

// ========== SUPABASE FONKSÄ°YONLARI ==========
async function getPrice() {
    try {
        const { data, error } = await supabase
            .from("settings")
            .select("price")
            .eq("id", 1)
            .single();

        if (error) {
            console.error("Supabase hatasÄ±:", error);
            document.getElementById("price").innerText = "60";
            return;
        }

        if (data) {
            document.getElementById("price").innerText = data.price;
        }
    } catch (err) {
        console.error("BaÄŸlantÄ± hatasÄ±:", err);
        document.getElementById("price").innerText = "60";
    }
}

async function updatePrice(newPrice) {
    try {
        const { data, error } = await supabase
            .from("settings")
            .update({ price: newPrice })
            .eq("id", 1);
            
        if (error) {
            showStatus("âŒ Fiyat gÃ¼ncellenemedi!", "error");
            return false;
        }
        
        showStatus("âœ… Fiyat gÃ¼ncellendi!", "success");
        return true;
    } catch (err) {
        showStatus("âŒ BaÄŸlantÄ± hatasÄ±!", "error");
        return false;
    }
}

// ========== TÃœM VERÄ°LERÄ° KAYDET ==========
async function saveAllToSupabase() {
    showStatus("ğŸ”„ Kaydediliyor...", "loading");
    
    try {
        // 1. Ana fiyatÄ± kaydet
        const mainPrice = document.getElementById("price").innerText;
        await supabase
            .from("settings")
            .update({ price: mainPrice })
            .eq("id", 1);
        
        // 2. MenÃ¼ verilerini topla
        const menuData = [];
        document.querySelectorAll(".card").forEach((card, index) => {
            const category = card.querySelector("h3").innerText;
            const items = [];
            card.querySelectorAll(".item").forEach(item => {
                items.push({
                    name: item.querySelector(".name").innerText,
                    price: item.querySelector(".item-price").innerText
                });
            });
            menuData.push({ 
                id: index,
                category, 
                items 
            });
        });
        
        // 3. MenÃ¼yÃ¼ kaydet
        await supabase
            .from("settings")
            .update({ menu_data: JSON.stringify(menuData) })
            .eq("id", 1);
        
        // 4. Instagram ve konum
        const instaLink = document.getElementById("instaLink")?.href || "";
        const mapSrc = document.getElementById("mapFrame")?.src || "";
        
        await supabase
            .from("settings")
            .update({ 
                instagram: instaLink,
                location: mapSrc
            })
            .eq("id", 1);
        
        showStatus("âœ… TÃ¼m veriler kaydedildi!", "success");
        
        // 5. Fiyat bÃ¶lÃ¼mÃ¼nÃ¼ gizle (baÅŸarÄ±lÄ± kayÄ±ttan sonra)
        setTimeout(() => {
            hidePriceSection();
        }, 2000);
        
    } catch (err) {
        console.error("KayÄ±t hatasÄ±:", err);
        showStatus("âŒ KayÄ±t baÅŸarÄ±sÄ±z!", "error");
    }
}

async function loadFromSupabase() {
    showStatus("ğŸ”„ YÃ¼kleniyor...", "loading");
    
    try {
        const { data, error } = await supabase
            .from("settings")
            .select("*")
            .eq("id", 1)
            .single();
        
        if (error) throw error;
        
        if (data) {
            // FiyatÄ± yÃ¼kle
            if (data.price) {
                document.getElementById("price").innerText = data.price;
            }
            
            // MenÃ¼yÃ¼ yÃ¼kle
            if (data.menu_data) {
                const menuData = JSON.parse(data.menu_data);
                // MenÃ¼yÃ¼ yeniden oluÅŸtur
                const container = document.getElementById("menu");
                container.innerHTML = "<h2>ğŸ½ï¸ MenÃ¼</h2>";
                
                menuData.forEach(cat => {
                    const card = document.createElement("div");
                    card.className = "card";
                    
                    let items = "";
                    cat.items.forEach(item => {
                        items += `<div class="item"><span class="name">${item.name}</span><span class="item-price">${item.price}</span></div>`;
                    });
                    
                    card.innerHTML = `<h3>${cat.category}</h3>${items}`;
                    container.appendChild(card);
                });
            }
            
            // Instagram ve konum
            if (data.instagram && document.getElementById("instaLink")) {
                document.getElementById("instaLink").href = data.instagram;
            }
            
            if (data.location && document.getElementById("mapFrame")) {
                document.getElementById("mapFrame").src = data.location;
            }
            
            showStatus("âœ… Veriler yÃ¼klendi!", "success");
        }
    } catch (err) {
        console.error("YÃ¼kleme hatasÄ±:", err);
        showStatus("âŒ YÃ¼kleme baÅŸarÄ±sÄ±z!", "error");
    }
}

// ========== FÄ°YAT BÃ–LÃœMÃœNÃœ GÄ°ZLE ==========
function hidePriceSection() {
    const priceSection = document.getElementById("priceSection");
    if(priceSection) {
        priceSection.style.display = "none";
        showStatus("ğŸ‘ï¸ Fiyat bÃ¶lÃ¼mÃ¼ gizlendi", "success");
    }
}

// ========== FÄ°YAT GÃœNCELLEME ==========
async function updateMainPrice() {
    if(!isDeveloper) return;
    
    let newPrice = document.getElementById("newPrice").value;
    if(newPrice && !isNaN(newPrice)) {
        document.getElementById("price").innerText = newPrice;
        await updatePrice(newPrice);
        document.getElementById("newPrice").value = "";
    } else {
        showStatus("âš ï¸ GeÃ§erli bir fiyat girin!", "error");
    }
}

// ========== PANEL KONTROLLERÄ° ==========
function openDev() {
    document.getElementById("devPanel").style.display = "block";
    document.getElementById("overlay").style.display = "block";
    isDeveloper = true;
    
    // Fiyat bÃ¶lÃ¼mÃ¼nÃ¼ gÃ¶ster (her aÃ§Ä±lÄ±ÅŸta)
    document.getElementById("priceSection").style.display = "block";
    
    document.getElementById("newPrice").value = document.getElementById("price").innerText;
    updateCategorySelect();
}

function closeDev() {
    document.getElementById("devPanel").style.display = "none";
    document.getElementById("overlay").style.display = "none";
    isDeveloper = false;
    deleteMode = false;
    editMode = false;
    
    document.body.classList.remove("delete-mode");
    document.body.classList.remove("edit-mode");
}

// ========== DURUM MESAJI ==========
function showStatus(message, type) {
    // Varolan mesajÄ± kaldÄ±r
    const oldStatus = document.querySelector(".status-message");
    if(oldStatus) oldStatus.remove();
    
    // Yeni mesaj oluÅŸtur
    const status = document.createElement("div");
    status.className = `status-message status-${type}`;
    status.innerHTML = message;
    document.body.appendChild(status);
    
    // 3 saniye sonra kaldÄ±r
    setTimeout(() => {
        status.remove();
    }, 3000);
}

// ========== KATEGORÄ° VE ÃœRÃœN YÃ–NETÄ°MÄ° ==========
function updateCategorySelect() {
    let select = document.getElementById("categorySelect");
    if(!select) return;
    
    select.innerHTML = "";
    
    document.querySelectorAll(".card h3").forEach((h3, index) => {
        let option = document.createElement("option");
        option.value = index;
        option.textContent = h3.innerText;
        select.appendChild(option);
    });
}

function addCategory() {
    if(!isDeveloper) return;
    
    let categoryName = document.getElementById("newCategory").value.trim();
    if(!categoryName) {
        showStatus("âš ï¸ Kategori adÄ± girin!", "error");
        return;
    }
    
    let container = document.getElementById("menu");
    let newCard = document.createElement("div");
    newCard.className = "card";
    newCard.innerHTML = `<h3>${categoryName}</h3>`;
    container.appendChild(newCard);
    
    document.getElementById("newCategory").value = "";
    updateCategorySelect();
    showStatus("âœ… Kategori eklendi!", "success");
}

function addProduct() {
    if(!isDeveloper) return;
    
    let categoryIndex = document.getElementById("categorySelect").value;
    let name = document.getElementById("productName").value.trim();
    let price = document.getElementById("productPrice").value.trim();
    
    if(!name || !price) {
        showStatus("âš ï¸ ÃœrÃ¼n adÄ± ve fiyat girin!", "error");
        return;
    }
    
    let cards = document.querySelectorAll(".card");
    if(cards[categoryIndex]) {
        let item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `<span class="name">${name}</span><span class="item-price">${price}â‚º</span>`;
        cards[categoryIndex].appendChild(item);
        
        document.getElementById("productName").value = "";
        document.getElementById("productPrice").value = "";
        
        showStatus("âœ… ÃœrÃ¼n eklendi!", "success");
    }
}

// ========== MODLAR ==========
function toggleDeleteMode() {
    if(!isDeveloper) return;
    deleteMode = !deleteMode;
    
    if(deleteMode) {
        document.body.classList.add("delete-mode");
        document.body.classList.remove("edit-mode");
        editMode = false;
        showStatus("ğŸ—‘ï¸ Silme modu aktif", "success");
    } else {
        document.body.classList.remove("delete-mode");
        showStatus("ğŸ”’ Silme modu kapalÄ±", "success");
    }
}

function toggleEditMode() {
    if(!isDeveloper) return;
    editMode = !editMode;
    
    if(editMode) {
        document.body.classList.add("edit-mode");
        document.body.classList.remove("delete-mode");
        deleteMode = false;
        
        document.querySelectorAll(".item-price").forEach(price => {
            price.contentEditable = true;
        });
        
        showStatus("âœï¸ DÃ¼zenleme modu aktif", "success");
    } else {
        document.body.classList.remove("edit-mode");
        
        document.querySelectorAll(".item-price").forEach(price => {
            price.contentEditable = false;
        });
        
        showStatus("ğŸ”’ DÃ¼zenleme modu kapalÄ±", "success");
    }
}

// ========== Ä°NSTAGRAM VE KONUM ==========
function updateInstagram() {
    if(!isDeveloper) return;
    let newLink = prompt("Yeni Instagram linkini girin:");
    if(newLink) {
        let instaLink = document.getElementById("instaLink");
        if(!instaLink) {
            // EÄŸer yoksa oluÅŸtur
            const contact = document.querySelector(".contact");
            const p = document.createElement("p");
            p.innerHTML = `ğŸ“· <a id="instaLink" href="${newLink}" target="_blank">Instagram</a>`;
            contact.appendChild(p);
        } else {
            instaLink.href = newLink;
        }
        showStatus("âœ… Instagram gÃ¼ncellendi!", "success");
    }
}

function updateLocation() {
    if(!isDeveloper) return;
    let newLocation = prompt("Yeni konum girin (Ã¶rn: 36.484479,32.101147):");
    if(newLocation) {
        let mapFrame = document.getElementById("mapFrame");
        if(!mapFrame) {
            // EÄŸer yoksa oluÅŸtur
            const contact = document.querySelector(".contact");
            const iframe = document.createElement("iframe");
            iframe.id = "mapFrame";
            iframe.src = `https://www.google.com/maps?q=${newLocation}&output=embed`;
            iframe.width = "100%";
            iframe.height = "300";
            contact.appendChild(iframe);
        } else {
            mapFrame.src = `https://www.google.com/maps?q=${newLocation}&output=embed`;
        }
        showStatus("âœ… Konum gÃ¼ncellendi!", "success");
    }
}

// ========== Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
document.querySelector(".container").addEventListener("click", function(e) {
    if(!isDeveloper || !deleteMode) return;
    
    let item = e.target.closest(".item");
    if(item && confirm("ğŸ—‘ï¸ Silmek istediÄŸinize emin misiniz?")) {
        item.remove();
        showStatus("âœ… Silindi!", "success");
    }
});

// ========== Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ==========
document.querySelector(".container").addEventListener("blur", function(e) {
    if(!isDeveloper || !editMode) return;
    
    if(e.target.classList.contains("item-price")) {
        // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ØªØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        showStatus("âœï¸ DeÄŸiÅŸiklik kaydedildi", "success");
    }
}, true);

// ========== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ==========
window.onload = function() {
    getPrice();
    
    let savedMenu = localStorage.getItem("menuHTML");
    if(savedMenu) {
        document.querySelector(".container").innerHTML = savedMenu;
    }
    
    updateCategorySelect();
};
</script>

</body>
</html>
