<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tosttoo | GeliÅŸmiÅŸ Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body{
margin:0;
font-family:Poppins;
background:#111;
color:white;
}

.hero{
height:100vh;
background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
url("https://i.postimg.cc/k5TwQCVb/hero.jpg") center/cover no-repeat;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
text-align:center
}

.hero h1{
font-size:60px;
color:#ff8c00;
cursor:pointer;
margin:0
}

.work-time{
margin-top:15px;
font-size:20px;
color:#ff8c00;
font-weight:600;
}

.price-container {
    margin-top: 15px;
    font-size: 24px;
}

#price {
    color: #ff8c00;
    font-weight: bold;
    padding: 5px 10px;
    background: rgba(255,140,0,0.1);
    border-radius: 5px;
}

.btn{
background:#ff8c00;
padding:12px 25px;
border:none;
color:white;
cursor:pointer;
margin-top:15px;
border-radius:6px
}

.container{
padding:60px 20px;
max-width:1100px;
margin:auto
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
gap:20px
}

.card{
background:#1e1e1e;
padding:20px;
border-radius:10px;
}

.card h3{color:#ff8c00;}

.item{
display:flex;
justify-content:space-between;
margin:10px 0;
}

.name{color:#ff8c00;}
.price{color:white;font-weight:bold}

.contact{
text-align:center;
padding:50px 20px;
background:#000
}

.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,0.8);
backdrop-filter:blur(5px);
display:none;
z-index:999;
}

/* ===== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© ===== */
.dev-window{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
width:95%;
max-width:500px;
max-height:90vh;
overflow-y:auto;
padding:25px;
border-radius:20px;
display:none;
z-index:1000;
background:rgba(20,20,20,0.98);
backdrop-filter:blur(20px);
border:2px solid #ff8c00;
box-shadow:0 0 50px rgba(255,140,0,0.3);
cursor:move;
}

.dev-window h3{
color:#ff8c00;
font-size:28px;
text-align:center;
margin:0 0 20px 0;
border-bottom:2px solid #ff8c00;
padding-bottom:10px;
}

.dev-section{
margin:20px 0;
padding:15px;
background:rgba(255,140,0,0.1);
border-radius:12px;
border:1px solid #ff8c00;
}

.dev-section h4{
color:#ff8c00;
margin:0 0 12px 0;
font-size:16px;
display:flex;
align-items:center;
gap:8px;
}

.dev-window input,
.dev-window select{
width:100%;
padding:10px;
margin:6px 0;
background:rgba(0,0,0,.6);
border:1px solid #333;
color:white;
border-radius:8px;
font-family:Poppins;
}

.dev-window input:focus,
.dev-window select:focus{
border-color:#ff8c00;
outline:none;
}

.dev-window button{
width:100%;
padding:10px;
margin:6px 0;
background:#ff8c00;
border:none;
color:white;
border-radius:8px;
cursor:pointer;
font-family:Poppins;
font-weight:600;
transition:all 0.3s ease;
}

.dev-window button:hover{
background:#ffa233;
transform:translateY(-2px);
box-shadow:0 5px 15px rgba(255,140,0,0.4);
}

.save-btn{
background:#28a745 !important;
}

.save-btn:hover{
background:#34ce57 !important;
}

.delete-btn{
background:#dc3545 !important;
}

.delete-btn:hover{
background:#ff4757 !important;
}

.close-btn{
background:#6c757d !important;
margin-top:20px;
}

/* ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø°Ù */
.delete-mode .item:hover{
outline:2px solid red;
cursor:pointer;
background:rgba(255,0,0,0.1);
}

/* ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
.edit-mode .price{
background:#333;
cursor:text;
}

/* Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© */
.status-message{
position:fixed;
top:20px;
right:20px;
padding:15px 25px;
border-radius:10px;
background:rgba(0,0,0,0.9);
border:2px solid;
color:white;
z-index:2000;
animation:slideIn 0.3s ease;
}

@keyframes slideIn{
from{transform:translateX(100%); opacity:0;}
to{transform:translateX(0); opacity:1;}
}

.status-success{border-color:#28a745;}
.status-error{border-color:#dc3545;}
.status-loading{border-color:#ff8c00;}
</style>
</head>

<body>

<section class="hero">
<h1 id="secretTrigger">Tosttoo</h1>
<div class="work-time">ğŸ•’ 08:00 - 02:30</div>
<div class="price-container">ğŸ’° Fiyat: <span id="price">60â‚º</span></div>
<button class="btn" onclick="scrollToMenu()">MenÃ¼yÃ¼ GÃ¶r</button>
</section>

<section class="container" id="menu">
<h2>MenÃ¼</h2>
<div class="grid" id="menuGrid">

<div class="card">
<h3>Tostlar</h3>
<div class="item"><span class="name">KaÅŸarlÄ± Tost</span><span class="price">60â‚º</span></div>
<div class="item"><span class="name">Sucuklu Tost</span><span class="price">75â‚º</span></div>
</div>

<div class="card">
<h3>Ä°Ã§ecekler</h3>
<div class="item"><span class="name">Ã‡ay</span><span class="price">10â‚º</span></div>
<div class="item"><span class="name">Kahve</span><span class="price">15â‚º</span></div>
</div>

</div>
</section>

<section class="contact">
<h2>Ä°letiÅŸim</h2>
<p>ğŸ“ <a href="tel:05321580207" style="color:#ff8c00">05321580207</a></p>
<p>ğŸ“· <a id="instaLink" href="https://instagram.com" target="_blank" style="color:#ff8c00">Instagram</a></p>
<iframe id="mapFrame"
src="https://www.google.com/maps?q=36.484479,32.101147&output=embed"
width="100%" height="300"></iframe>
</section>

<div class="overlay" id="overlay"></div>

<!-- ===== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© ===== -->
<div class="dev-window" id="devPanel">
<h3>âš¡ PRO Developer Panel</h3>

<!-- Fiyat BÃ¶lÃ¼mÃ¼ -->
<div class="dev-section">
<h4>ğŸ’° Fiyat DÃ¼zenle</h4>
<input type="number" id="newPrice" placeholder="Yeni fiyat girin">
<button onclick="updateMainPrice()" class="save-btn">ğŸ’¾ FiyatÄ± Kaydet</button>
<button onclick="togglePriceEdit()">âœï¸ DoÄŸrudan DÃ¼zenle</button>
</div>

<!-- ÃœrÃ¼n Ekleme -->
<div class="dev-section">
<h4>â• ÃœrÃ¼n Ekle</h4>
<select id="categorySelect"></select>
<input type="text" id="newName" placeholder="ÃœrÃ¼n AdÄ±">
<input type="text" id="productPrice" placeholder="Fiyat">
<button onclick="addProduct()">âœ… ÃœrÃ¼n Ekle</button>
</div>

<!-- Kategori Ekleme -->
<div class="dev-section">
<h4>ğŸ“ Kategori Ekle</h4>
<input type="text" id="newCategory" placeholder="Yeni Kategori">
<button onclick="addCategory()">ğŸ“ Kategori Ekle</button>
</div>

<!-- AraÃ§lar -->
<div class="dev-section">
<h4>ğŸ”§ AraÃ§lar</h4>
<button onclick="toggleDeleteMode()">ğŸ—‘ï¸ Silme Modu</button>
<button onclick="enableEdit()">âœï¸ Fiyat DÃ¼zenleme</button>
<button onclick="deleteAll()" class="delete-btn">ğŸ—‘ï¸ TÃ¼m MenÃ¼ Sil</button>
</div>

<!-- Sosyal Medya -->
<div class="dev-section">
<h4>ğŸ“± Sosyal Medya</h4>
<input type="text" id="newInstagram" placeholder="Instagram Link">
<button onclick="changeInstagram()">ğŸ“· Instagram GÃ¼ncelle</button>
<input type="text" id="newLocation" placeholder="Konum (Ã¶rn: 36.484479,32.101147)">
<button onclick="changeLocation()">ğŸ“ Konum GÃ¼ncelle</button>
</div>

<!-- Supabase Senkronizasyon -->
<div class="dev-section">
<h4>ğŸ’¾ Supabase</h4>
<button onclick="saveToSupabase()" class="save-btn">ğŸ’¾ TÃ¼mÃ¼nÃ¼ Kaydet</button>
<button onclick="loadFromSupabase()">ğŸ”„ Verileri YÃ¼kle</button>
<div id="syncStatus" style="text-align:center; margin-top:10px; font-size:14px;"></div>
</div>

<button onclick="closeDev()" class="close-btn">âŒ Kapat</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// ===== SUPABASE KONFÄ°GÃœRASYONU =====
const supabaseUrl = "https://cufbyiefzbgygtyibupl.supabase.co";
const supabaseKey = "sb_publishable_mTI9Fl-eMcN3TbLqyQAGNw_fzQF7ssr";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

let isDeveloper = false;
let deleteMode = false;
let priceEditMode = false;

// ===== TEMEL FONKSÄ°YONLAR =====
function scrollToMenu() {
    document.getElementById("menu").scrollIntoView({behavior:"smooth"});
}

// ===== GÄ°ZLÄ° GÄ°RÄ°Å =====
let tap=0,timer=null;
document.getElementById("secretTrigger").onclick=function(){
tap++;
if(tap==1){timer=setTimeout(()=>tap=0,5000);}
if(tap==5){
clearTimeout(timer);
tap=0;
let pass=prompt("ğŸ” Åifre gir:");
if(pass==="momotunc0702") openDev();
}
};

function openDev(){
document.getElementById("devPanel").style.display="block";
document.getElementById("overlay").style.display="block";
isDeveloper=true;
updateCategorySelect();
document.getElementById("newPrice").value = document.getElementById("price").innerText.replace('â‚º','');
}

function closeDev(){
isDeveloper=false;
deleteMode=false;
priceEditMode=false;
document.getElementById("devPanel").style.display="none";
document.getElementById("overlay").style.display="none";
document.querySelectorAll(".price").forEach(p=>{
p.contentEditable=false;
p.style.background="transparent";
});
document.body.classList.remove("delete-mode");
document.body.classList.remove("edit-mode");
}

// ===== KATEGORÄ° Ä°ÅLEMLERÄ° =====
function updateCategorySelect(){
let select=document.getElementById("categorySelect");
select.innerHTML="";
document.querySelectorAll(".card h3").forEach((h,i)=>{
let o=document.createElement("option");
o.textContent=h.innerText;
o.value=i;
select.appendChild(o);
});
}

function addCategory(){
if(!isDeveloper) return;
let name=document.getElementById("newCategory").value.trim();
if(!name) return;
let card=document.createElement("div");
card.className="card";
card.innerHTML="<h3>"+name+"</h3>";
document.getElementById("menuGrid").appendChild(card);
updateCategorySelect();
document.getElementById("newCategory").value="";
showStatus("âœ… Kategori eklendi","success");
}

function addProduct(){
if(!isDeveloper) return;
let name=document.getElementById("newName").value.trim();
let price=document.getElementById("productPrice").value.trim();
if(!name||!price) return;

let cards=document.querySelectorAll(".card");
let index=document.getElementById("categorySelect").value;
if(cards[index]){
let div=document.createElement("div");
div.className="item";
div.innerHTML="<span class='name'>"+name+"</span><span class='price'>"+price+"â‚º</span>";
cards[index].appendChild(div);
document.getElementById("newName").value="";
document.getElementById("productPrice").value="";
showStatus("âœ… ÃœrÃ¼n eklendi","success");
}
}

// ===== FÄ°YAT Ä°ÅLEMLERÄ° =====
function updateMainPrice(){
if(!isDeveloper) return;
let newPrice=document.getElementById("newPrice").value;
if(newPrice && !isNaN(newPrice)){
document.getElementById("price").innerText = newPrice+"â‚º";
showStatus("âœ… Fiyat gÃ¼ncellendi","success");
}
}

function togglePriceEdit(){
if(!isDeveloper) return;
priceEditMode = !priceEditMode;
let priceElement = document.getElementById("price");
if(priceEditMode){
priceElement.contentEditable = true;
priceElement.style.background = "#333";
priceElement.focus();
} else {
priceElement.contentEditable = false;
priceElement.style.background = "transparent";
}
}

document.getElementById("price").addEventListener("blur", function(){
if(priceEditMode){
priceEditMode = false;
this.contentEditable = false;
this.style.background = "transparent";
showStatus("âœ… Fiyat gÃ¼ncellendi","success");
}
});

// ===== SÄ°LME MODU =====
function toggleDeleteMode(){
if(!isDeveloper) return;
deleteMode=!deleteMode;
document.getElementById("menuGrid").classList.toggle("delete-mode",deleteMode);
showStatus(deleteMode ? "ğŸ—‘ï¸ Silme modu aktif" : "ğŸ”’ Silme modu kapalÄ±","success");
}

document.getElementById("menuGrid").addEventListener("click",function(e){
if(!deleteMode) return;
let item=e.target.closest(".item");
let card=e.target.closest(".card");
if(item && confirm("Silmek istiyor musun?")){
item.remove();
showStatus("âœ… Silindi","success");
} else if(card && card.querySelectorAll(".item").length === 0 && confirm("Kategoriyi sil?")){
card.remove();
updateCategorySelect();
showStatus("âœ… Kategori silindi","success");
}
});

// ===== DÃœZENLEME MODU =====
function enableEdit(){
if(!isDeveloper) return;
document.querySelectorAll(".price").forEach(p=>{
p.contentEditable=true;
p.style.background="#333";
});
document.body.classList.add("edit-mode");
showStatus("âœï¸ FiyatlarÄ± dÃ¼zenleyebilirsiniz","success");
}

// ===== TOPLU Ä°ÅLEMLER =====
function deleteAll(){
if(!isDeveloper) return;
if(confirm("TÃ¼m menÃ¼ silinsin mi?")){
document.getElementById("menuGrid").innerHTML="";
updateCategorySelect();
showStatus("ğŸ—‘ï¸ TÃ¼m menÃ¼ silindi","success");
}
}

function changeInstagram(){
if(!isDeveloper) return;
let val=document.getElementById("newInstagram").value.trim();
if(val){
document.getElementById("instaLink").href=val;
showStatus("âœ… Instagram gÃ¼ncellendi","success");
}
}

function changeLocation(){
if(!isDeveloper) return;
let val=document.getElementById("newLocation").value.trim();
if(val){
document.getElementById("mapFrame").src=
"https://www.google.com/maps?q="+val+"&output=embed";
showStatus("âœ… Konum gÃ¼ncellendi","success");
}
}

// ===== SUPABASE FONKSÄ°YONLARI =====
async function saveToSupabase() {
showStatus("ğŸ”„ Kaydediliyor...","loading");
try {
const mainPrice = document.getElementById("price").innerText;
await supabase.from("settings").update({ price: mainPrice }).eq("id", 1);

const menuData = [];
document.querySelectorAll(".card").forEach(card => {
let category = card.querySelector("h3").innerText;
let items = [];
card.querySelectorAll(".item").forEach(item => {
items.push({
name: item.querySelector(".name").innerText,
price: item.querySelector(".price").innerText
});
});
menuData.push({ category, items });
});

await supabase.from("settings").update({ menu_data: JSON.stringify(menuData) }).eq("id", 1);
showStatus("âœ… Supabase'e kaydedildi!","success");
} catch(err) {
showStatus("âŒ KayÄ±t hatasÄ±!","error");
}
}

async function loadFromSupabase() {
showStatus("ğŸ”„ YÃ¼kleniyor...","loading");
try {
const { data, error } = await supabase.from("settings").select("*").eq("id", 1).single();
if(data) {
if(data.price) document.getElementById("price").innerText = data.price;
showStatus("âœ… Veriler yÃ¼klendi!","success");
}
} catch(err) {
showStatus("âŒ YÃ¼kleme hatasÄ±!","error");
}
}

function showStatus(message, type) {
const status = document.createElement("div");
status.className = `status-message status-${type}`;
status.innerHTML = message;
document.body.appendChild(status);
setTimeout(() => status.remove(), 3000);
}

// ===== SAYFA YÃœKLENÄ°NCE =====
window.onload = function(){
if(localStorage.getItem("menuData"))
document.getElementById("menuGrid").innerHTML = localStorage.getItem("menuData");
if(localStorage.getItem("insta"))
document.getElementById("instaLink").href = localStorage.getItem("insta");
if(localStorage.getItem("map"))
document.getElementById("mapFrame").src = "https://www.google.com/maps?q="+localStorage.getItem("map")+"&output=embed";
updateCategorySelect();
};

// ===== SÃœRÃœKLEME =====
let devPanel=document.getElementById("devPanel");
let isDragging=false,offsetX,offsetY;
devPanel.addEventListener("mousedown",function(e){
if(e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'BUTTON') return;
isDragging=true;
offsetX=e.clientX-devPanel.offsetLeft;
offsetY=e.clientY-devPanel.offsetTop;
devPanel.style.transform="none";
});

document.addEventListener("mousemove",function(e){
if(isDragging){
devPanel.style.left=(e.clientX-offsetX)+"px";
devPanel.style.top=(e.clientY-offsetY)+"px";
}
});

document.addEventListener("mouseup",function(){
isDragging=false;
});
</script>

</body>
</html>
