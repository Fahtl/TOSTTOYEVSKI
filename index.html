<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tosttoo | Cloud Sync</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
/* ===== ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    transition: all 0.5s ease;
    background: linear-gradient(-45deg, #0a0a0a, #1a1a1a, #2a2a2a, #1a1a1a);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: #fff;
}
@keyframes gradientBG { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
.hero {
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://i.postimg.cc/k5TwQCVb/hero.jpg');
    background-size: cover;
    background-position: center;
}
.hero h1 {
    font-size: 60px;
    color: #ff8c00;
    cursor: pointer;
    animation: floatTitle 3s ease-in-out infinite;
    -webkit-tap-highlight-color: transparent;
}
@keyframes floatTitle { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
.work-time {
    margin: 15px 0;
    font-size: 20px;
    color: #ff8c00;
    font-weight: 600;
    animation: pulse 2s infinite;
}
@keyframes pulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.05);opacity:0.9} }
.btn {
    padding: 12px 25px;
    border: none;
    border-radius: 6px;
    background: #ff8c00;
    color: #fff;
    cursor: pointer;
    transition: 0.3s;
}
.btn:hover { transform: translateY(-3px) scale(1.05); }
.container {
    padding: 60px 20px;
    max-width: 1100px;
    margin: auto;
}
.container h2 {
    font-size: 40px;
    color: #ff8c00;
    text-align: center;
    margin-bottom: 40px;
}
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}
.card {
    background: #1e1e1e;
    padding: 20px;
    border-radius: 10px;
    border: 1px solid rgba(255,140,0,0.3);
}
.card h3 {
    color: #ff8c00;
    font-size: 24px;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #ff8c00;
    padding-bottom: 10px;
}
.item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
}
.name { color: #ff8c00; font-weight: 600; }
.price { color: #fff; font-weight: bold; }
.contact {
    text-align: center;
    padding: 50px 20px;
    background: #000;
}
.contact h2 { font-size: 40px; color: #ff8c00; margin-bottom: 30px; }
.contact a { text-decoration: none; color: #ff8c00; }
iframe {
    border-radius: 10px;
    margin-top: 20px;
    width: 100%;
    height: 300px;
    border: none;
}
.control-buttons {
    position: fixed;
    top: 20px;
    right: 90px;
    display: flex;
    gap: 8px;
    z-index: 1000;
}
.control-btn {
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    background: #ff8c00;
    color: white;
    cursor: pointer;
    font-weight: bold;
}
#modeToggle {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    border: none;
    background: #ff8c00;
    color: white;
    font-size: 20px;
    cursor: pointer;
    z-index: 1000;
}
.live-badge {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(255,0,0,0.9);
    color: #fff;
    padding: 6px 16px;
    border-radius: 30px;
    font-weight: bold;
    z-index: 100;
    animation: livePulse 1.5s infinite;
}
@keyframes livePulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }
.dev-window {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 95%;
    max-width: 420px;
    max-height: 90vh;
    overflow: auto;
    padding: 20px;
    border-radius: 15px;
    display: none;
    z-index: 1000;
    background: rgba(20,20,20,0.95);
    border: 2px solid #ff8c00;
}
.dev-window h3 {
    color: #ff8c00;
    font-size: 24px;
    text-align: center;
    margin-bottom: 15px;
    border-bottom: 2px solid #ff8c00;
    padding-bottom: 10px;
}
.dev-section {
    margin: 15px 0;
    padding: 15px;
    background: rgba(0,0,0,0.5);
    border-radius: 10px;
}
.dev-section h4 { color: #ff8c00; margin-bottom: 10px; }
.dev-window input, .dev-window select {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
    background: #333;
    border: 1px solid #ff8c00;
    border-radius: 6px;
    color: white;
}
.dev-window button {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
    background: #ff8c00;
    border: none;
    color: white;
    border-radius: 6px;
    cursor: pointer;
}
.status-message {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 10px;
    background: rgba(0,0,0,0.9);
    border: 2px solid;
    color: #fff;
    font-weight: 600;
    z-index: 2000;
    animation: slideIn 0.3s;
}
@keyframes slideIn { from{transform:translateX(100%);opacity:0} to{transform:translateX(0);opacity:1} }
.status-success { border-color: #28a745; }
.status-error { border-color: #dc3545; }
.delete-mode .item:hover { outline: 2px solid red; cursor: pointer; }
.double-tap-hint {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,107,0,0.3);
    color: white;
    padding: 5px 15px;
    border-radius: 50px;
    font-size: 12px;
    backdrop-filter: blur(5px);
    border: 1px solid #ff8c00;
    animation: fadeInOut 3s infinite;
}
@keyframes fadeInOut { 0%,100%{opacity:0.3} 50%{opacity:1} }
.light-mode {
    background: #f6f1e8 !important;
    color: #2b2b2b !important;
    animation: none !important;
}
.light-mode .card { background: #fffaf3 !important; border: 1px solid #e6d8c3 !important; }
.light-mode h1, .light-mode h2, .light-mode h3 { color: #d97706 !important; }
.light-mode .hero { background: linear-gradient(rgba(246,241,232,0.85), rgba(246,241,232,0.85)), url('https://i.postimg.cc/k5TwQCVb/hero.jpg') center/cover no-repeat !important; }
.light-mode .name { color: #8b6b4f !important; }
.light-mode .price { color: #d97706 !important; }
.light-mode .contact { background: #e6d8c3 !important; }
@media (max-width: 768px) { .hero h1 { font-size: 40px; } .double-tap-hint { font-size: 10px; } }
</style>
</head>
<body class="" id="body">

<!-- ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ -->
<div class="live-badge">üî¥ CANLI</div>

<!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
<div class="control-buttons">
    <button class="control-btn" id="langBtn">üåç EN / TR</button>
</div>
<button id="modeToggle">üåô</button>

<!-- ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä -->
<section class="hero">
    <h1 id="secretTrigger">Tosttoo</h1>
    <div class="double-tap-hint">üëÜüëÜ √áƒ∞FT TIKLA</div>
    <div class="work-time">üïí 08:00 - 02:30</div>
    <button class="btn" onclick="document.getElementById('menuGrid').scrollIntoView({behavior:'smooth'})">Men√ºy√º G√∂r</button>
</section>

<!-- ÿßŸÑŸÖŸÜŸäŸà -->
<section class="container">
    <h2 id="menuTitle">Men√º</h2>
    <div class="grid" id="menuGrid"></div>
</section>

<!-- ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
<section class="contact">
    <h2 id="contactTitle">ƒ∞leti≈üim</h2>
    <p>üìû <a href="tel:05321580207">05321580207</a></p>
    <p>üì∑ <a id="instaLink" href="https://www.instagram.com/tosttooyevski" target="_blank">Instagram</a></p>
    <iframe id="mapFrame" src="https://www.google.com/maps?q=36.484479,32.101147&output=embed"></iframe>
</section>

<!-- ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ± -->
<div class="dev-window" id="devPanel">
    <h3>‚öôÔ∏è GELƒ∞≈ûTƒ∞Rƒ∞Cƒ∞</h3>

    <div class="dev-section">
        <h4>‚ûï √úr√ºn Ekle</h4>
        <select id="categorySelect"></select>
        <input type="text" id="productName" placeholder="√úr√ºn Adƒ±">
        <input type="text" id="productPrice" placeholder="Fiyat">
        <button onclick="addProduct()">Ekle</button>
    </div>

    <div class="dev-section">
        <h4>üìÅ Kategori Ekle</h4>
        <input type="text" id="categoryName" placeholder="Kategori Adƒ±">
        <button onclick="addCategory()">Ekle</button>
    </div>

    <div class="dev-section">
        <h4>üóëÔ∏è Silme</h4>
        <button onclick="toggleDeleteMode()" id="deleteModeBtn">Silme Modu A√ß</button>
    </div>

    <div class="dev-section">
        <h4>üì± Sosyal</h4>
        <input type="text" id="newInstagram" placeholder="Instagram Link">
        <button onclick="changeInstagram()">G√ºncelle</button>
        <input type="text" id="newLocation" placeholder="Konum (√∂rn: 36.484479,32.101147)">
        <button onclick="changeLocation()">G√ºncelle</button>
    </div>

    <div class="dev-section" style="border-color: #00ff00;">
        <h4>‚òÅÔ∏è CLOUD</h4>
        <button onclick="saveToCloud()" style="background:#0066cc;" id="saveBtn">üíæ KAYDET</button>
        <button onclick="loadFromCloud()" style="background:#673ab7;">üì• Y√úKLE</button>
    </div>

    <button onclick="closeDev()" style="background:#666;">Kapat</button>
</div>

<div id="statusMessage" class="status-message" style="display:none;"></div>

<script>
// ===== ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ (ŸäÿπŸÖŸÑ 100%) =====
const API_URL = 'https://api.npoint.io/2b9acf08c13ba5b3b27a';

// ===== ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ =====
let isDev = false;
let deleteMode = false;

// ===== ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜŸäŸà ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ© =====
window.onload = function() {
    loadFromCloud();
    loadSavedSettings();
    startAutoRefresh();
};

// ===== ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÉŸÑ 5 ÿ´ŸàÿßŸÜŸä =====
function startAutoRefresh() {
    setInterval(() => {
        loadFromCloud(true); // true = ÿ®ÿØŸàŸÜ ÿ±ÿ≥ÿßŸÑÿ©
    }, 5000);
}

// ===== ÿ≠ŸÅÿ∏ ŸÅŸä ÿßŸÑÿ≥ÿ≠ÿßÿ® =====
async function saveToCloud() {
    showStatus('‚òÅÔ∏è Kaydediliyor...', 'loading');
    
    // ÿ¨ŸÖÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜŸäŸà
    let menu = [];
    document.querySelectorAll('.card').forEach(card => {
        let category = card.querySelector('h3').innerText;
        let items = [];
        card.querySelectorAll('.item').forEach(item => {
            items.push({
                name: item.querySelector('.name').innerText,
                price: item.querySelector('.price').innerText
            });
        });
        menu.push({ category, items });
    });
    
    try {
        // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸÑŸâ npoint.io
        let response = await fetch(API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ menu: menu })
        });
        
        if (response.ok) {
            showStatus('‚úÖ Kaydedildi! Herkes g√∂recek!', 'success');
            // ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ŸÖÿ≠ŸÑŸäÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©
            localStorage.setItem('lastMenu', JSON.stringify(menu));
        } else {
            throw new Error('Hata');
        }
    } catch(e) {
        showStatus('‚ùå Kayƒ±t ba≈üarƒ±sƒ±z! Manuel dene: npoint.io', 'error');
        // ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸÑŸÑÿ≠ŸÅÿ∏ ÿßŸÑŸäÿØŸàŸä
        navigator.clipboard?.writeText(API_URL);
    }
}

// ===== ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÜ ÿßŸÑÿ≥ÿ≠ÿßÿ® =====
async function loadFromCloud(silent = false) {
    try {
        let response = await fetch(API_URL);
        let data = await response.json();
        
        if (data.menu && data.menu.length > 0) {
            displayMenu(data.menu);
            if (!silent) showStatus('‚úÖ Men√º y√ºklendi!', 'success');
        } else {
            loadDefaultMenu();
        }
    } catch(e) {
        // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿå ÿ≠ŸÖŸÑ ŸÖŸÜ localStorage
        let lastMenu = localStorage.getItem('lastMenu');
        if (lastMenu) {
            displayMenu(JSON.parse(lastMenu));
            if (!silent) showStatus('üìã Yedekten y√ºklendi', 'success');
        } else {
            loadDefaultMenu();
        }
    }
}

// ===== ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜŸäŸà =====
function displayMenu(menu) {
    let grid = document.getElementById('menuGrid');
    grid.innerHTML = '';
    
    menu.forEach(cat => {
        let card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<h3>${cat.category}</h3>`;
        
        cat.items.forEach(item => {
            card.innerHTML += `<div class="item"><span class="name">${item.name}</span><span class="price">${item.price}</span></div>`;
        });
        
        grid.appendChild(card);
    });
    
    if (isDev) updateCategorySelect();
}

// ===== ÿßŸÑŸÖŸÜŸäŸà ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä =====
function loadDefaultMenu() {
    let defaultMenu = [
        { category: 'Tostlar', items: [
            { name: 'Ka≈üarlƒ± Tost', price: '60‚Ç∫' },
            { name: 'Sucuklu Tost', price: '75‚Ç∫' }
        ]},
        { category: 'ƒ∞√ßecekler', items: [
            { name: '√áay', price: '10‚Ç∫' },
            { name: 'Kahve', price: '15‚Ç∫' }
        ]}
    ];
    displayMenu(defaultMenu);
}

// ===== ŸÅÿ™ÿ≠ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ± =====
let clickCount = 0;
document.getElementById('secretTrigger').addEventListener('click', function() {
    clickCount++;
    setTimeout(() => clickCount = 0, 300);
    if (clickCount === 2) {
        let pass = prompt('≈ûifre:');
        if (pass === 'momotunc0702') {
            isDev = true;
            document.getElementById('devPanel').style.display = 'block';
            updateCategorySelect();
            showStatus('‚úÖ Ho≈ü geldiniz!', 'success');
        }
    }
});

// F5
document.addEventListener('keydown', function(e) {
    if (e.key === 'F5') {
        e.preventDefault();
        let pass = prompt('≈ûifre:');
        if (pass === 'momotunc0702') {
            isDev = true;
            document.getElementById('devPanel').style.display = 'block';
            updateCategorySelect();
        }
    }
});

function closeDev() {
    document.getElementById('devPanel').style.display = 'none';
    isDev = false;
    deleteMode = false;
}

// ===== ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™ =====
function updateCategorySelect() {
    let select = document.getElementById('categorySelect');
    select.innerHTML = '';
    document.querySelectorAll('.card h3').forEach((h3, i) => {
        select.innerHTML += `<option value="${i}">${h3.innerText}</option>`;
    });
}

// ===== ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ =====
function addProduct() {
    if (!isDev) return;
    
    let name = document.getElementById('productName').value;
    let price = document.getElementById('productPrice').value;
    let catIndex = document.getElementById('categorySelect').value;
    
    if (!name || !price) {
        showStatus('Ad ve fiyat girin!', 'error');
        return;
    }
    
    let cards = document.querySelectorAll('.card');
    if (cards[catIndex]) {
        let item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `<span class="name">${name}</span><span class="price">${price}</span>`;
        cards[catIndex].appendChild(item);
        
        document.getElementById('productName').value = '';
        document.getElementById('productPrice').value = '';
        showStatus('‚úÖ √úr√ºn eklendi!', 'success');
    }
}

// ===== ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿµŸÜŸäŸÅ =====
function addCategory() {
    if (!isDev) return;
    
    let name = document.getElementById('categoryName').value;
    if (!name) {
        showStatus('Kategori adƒ± girin!', 'error');
        return;
    }
    
    let card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<h3>${name}</h3>`;
    document.getElementById('menuGrid').appendChild(card);
    
    document.getElementById('categoryName').value = '';
    updateCategorySelect();
    showStatus('‚úÖ Kategori eklendi!', 'success');
}

// ===== Ÿàÿ∂ÿπ ÿßŸÑÿ≠ÿ∞ŸÅ =====
function toggleDeleteMode() {
    deleteMode = !deleteMode;
    let btn = document.getElementById('deleteModeBtn');
    btn.textContent = deleteMode ? 'Silme Modu Aktif' : 'Silme Modu A√ß';
    btn.style.background = deleteMode ? '#dc3545' : '#ff8c00';
}

document.getElementById('menuGrid').addEventListener('click', function(e) {
    if (!deleteMode || !isDev) return;
    
    let item = e.target.closest('.item');
    if (item && confirm('Silmek istiyor musun?')) {
        item.remove();
        showStatus('Silindi', 'success');
    }
});

// ===== ÿ™ÿ≠ÿØŸäÿ´ Instagram =====
function changeInstagram() {
    let val = document.getElementById('newInstagram').value;
    if (val) {
        document.getElementById('instaLink').href = val;
        localStorage.setItem('insta', val);
        showStatus('Instagram g√ºncellendi', 'success');
    }
}

// ===== ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸàŸÇÿπ =====
function changeLocation() {
    let val = document.getElementById('newLocation').value;
    if (val) {
        document.getElementById('mapFrame').src = `https://www.google.com/maps?q=${val}&output=embed`;
        localStorage.setItem('map', val);
        showStatus('Konum g√ºncellendi', 'success');
    }
}

// ===== ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ =====
function loadSavedSettings() {
    if (localStorage.getItem('insta')) {
        document.getElementById('instaLink').href = localStorage.getItem('insta');
    }
    if (localStorage.getItem('map')) {
        document.getElementById('mapFrame').src = `https://www.google.com/maps?q=${localStorage.getItem('map')}&output=embed`;
    }
    if (localStorage.getItem('theme') === 'light') {
        document.body.classList.add('light-mode');
        modeToggle.innerHTML = '‚òÄÔ∏è';
    }
}

// ===== ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑÿ© =====
function showStatus(msg, type) {
    let status = document.getElementById('statusMessage');
    status.textContent = msg;
    status.className = `status-message status-${type}`;
    status.style.display = 'block';
    setTimeout(() => status.style.display = 'none', 2000);
}

// ===== ÿßŸÑŸÑÿ∫ÿ© =====
let lang = localStorage.getItem('lang') || 'tr';
function toggleLanguage() {
    lang = lang === 'tr' ? 'en' : 'tr';
    localStorage.setItem('lang', lang);
    document.getElementById('langBtn').innerText = lang === 'tr' ? 'üåç EN / TR' : 'üåç TR / EN';
    document.getElementById('menuTitle').innerText = lang === 'tr' ? 'Men√º' : 'Menu';
    document.getElementById('contactTitle').innerText = lang === 'tr' ? 'ƒ∞leti≈üim' : 'Contact';
    document.querySelector('.btn').innerText = lang === 'tr' ? 'Men√ºy√º G√∂r' : 'View Menu';
}
document.getElementById('langBtn').onclick = toggleLanguage;

// ===== ÿßŸÑŸàÿ∂ÿπ =====
let modeToggle = document.getElementById('modeToggle');
modeToggle.onclick = function() {
    document.body.classList.toggle('light-mode');
    modeToggle.innerHTML = document.body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
    localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
};

// ===== ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ£ŸàŸÑŸä =====
toggleLanguage();
</script>

</body>
</html>
