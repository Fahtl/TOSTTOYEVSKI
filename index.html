<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tosttoo Ultimate 3.0</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#111;
    color:#fff;
    transition:.3s;
}
header{
    background:#ff8c00;
    padding:15px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
}
.container{
    padding:20px;
}
.card{
    background:#1e1e1e;
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
}
.item{
    display:flex;
    justify-content:space-between;
    padding:8px 0;
    cursor:pointer;
}
button{
    padding:10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
#cartBtn{
    position:fixed;
    top:15px;
    right:15px;
    background:#28a745;
    color:white;
}
#modeBtn{
    position:fixed;
    top:15px;
    left:15px;
    background:#444;
    color:white;
}
#cartModal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.8);
    display:none;
    align-items:center;
    justify-content:center;
}
#cartBox{
    background:#222;
    padding:20px;
    width:320px;
    border-radius:12px;
}
.light{
    background:#f6f1e8;
    color:#000;
}
.light .card{
    background:#fff;
}
</style>
</head>

<body>

<header>Tosttoo Ultimate</header>

<button id="cartBtn">üõí (<span id="cartCount">0</span>)</button>
<button id="modeBtn">üåô</button>

<div class="container">

<div class="card">
<h3>Tostlar</h3>

<div class="item" data-stock="5" onclick="addToCart(this)">
<span>Ka≈üarlƒ± Tost</span>
<span class="price">60</span>‚Ç∫
</div>

<div class="item" data-stock="3" onclick="addToCart(this)">
<span>Sucuklu Tost</span>
<span class="price">75</span>‚Ç∫
</div>

</div>

<div class="card">
<h3>ƒ∞√ßecekler</h3>

<div class="item" data-stock="10" onclick="addToCart(this)">
<span>√áay</span>
<span class="price">10</span>‚Ç∫
</div>

<div class="item" data-stock="8" onclick="addToCart(this)">
<span>Kahve</span>
<span class="price">15</span>‚Ç∫
</div>

</div>

<h3>üì∑ QR Men√º</h3>
<img id="qr" width="150">

</div>

<!-- CART -->
<div id="cartModal">
<div id="cartBox">
<h3>Sepet</h3>
<div id="cartItems"></div>
<h4 id="total">Toplam: 0‚Ç∫</h4>
<button onclick="checkout()" style="background:#25D366;color:white;width:100%;margin-top:10px;">Sipari≈üi WhatsApp G√∂nder</button>
<button onclick="closeCart()" style="background:#666;color:white;width:100%;margin-top:5px;">Kapat</button>
</div>
</div>

<script>

let cart = JSON.parse(localStorage.getItem("cart") || "[]");

function updateCart(){
    let container = document.getElementById("cartItems");
    container.innerHTML="";
    let total=0;

    cart.forEach((item,i)=>{
        total+=item.price;
        container.innerHTML+=`
        <div style="display:flex;justify-content:space-between;margin:5px 0;">
            <span>${item.name}</span>
            <span>${item.price}‚Ç∫</span>
        </div>`;
    });

    document.getElementById("total").innerText="Toplam: "+total+"‚Ç∫";
    document.getElementById("cartCount").innerText=cart.length;

    localStorage.setItem("cart",JSON.stringify(cart));
}

function addToCart(el){
    let stock=parseInt(el.dataset.stock);

    if(stock<=0){
        alert("Stok t√ºkendi!");
        return;
    }

    el.dataset.stock=stock-1;

    let name=el.children[0].innerText;
    let price=parseInt(el.querySelector(".price").innerText);

    cart.push({name,price});
    updateCart();
    playSound();
}

function checkout(){
    if(cart.length==0){
        alert("Sepet bo≈ü!");
        return;
    }

    let msg="Tosttoo Sipari≈ü:\n\n";
    let total=0;

    cart.forEach(item=>{
        msg+= "- "+item.name+" ("+item.price+"‚Ç∫)\n";
        total+=item.price;
    });

    msg+="\nToplam: "+total+"‚Ç∫";

    window.open("https://wa.me/905321580207?text="+encodeURIComponent(msg));
}

function closeCart(){
    document.getElementById("cartModal").style.display="none";
}

document.getElementById("cartBtn").onclick=function(){
    document.getElementById("cartModal").style.display="flex";
}

function playSound(){
    let audio=new Audio("https://www.soundjay.com/buttons/sounds/button-3.mp3");
    audio.play();
}

updateCart();

/* QR */
document.getElementById("qr").src=
"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+window.location.href;

/* Dark Light */
document.getElementById("modeBtn").onclick=function(){
    document.body.classList.toggle("light");
    this.innerText=document.body.classList.contains("light")?"‚òÄÔ∏è":"üåô";
}

</script>

</body>
</html>
