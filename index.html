<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<title>Tosttoo | CanlÄ± MenÃ¼</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ===== Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    transition: all 0.5s ease;
    overflow-x: hidden;
}

/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© */
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
body.night-mode {
    background: linear-gradient(-45deg, #0a0a0a, #1a1a1a, #2a2a2a, #1a1a1a);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: #fff;
}

body.night-mode .hero {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                url('https://i.postimg.cc/k5TwQCVb/hero.jpg');
    background-size: cover;
    background-position: center;
}

body.night-mode .hero h1 { color: #ff8c00; }
body.night-mode .work-time { background: rgba(0,0,0,0.6); border: 1px solid #ff8c00; color: #ff8c00; }
body.night-mode .btn { background: #ff8c00; color: #fff; }
body.night-mode .card { background: rgba(30, 30, 30, 0.9); border: 1px solid rgba(255,140,0,0.3); }
body.night-mode .card h3 { color: #ff8c00; border-bottom: 2px solid #ff8c00; }
body.night-mode .name { color: #ff8c00; }
body.night-mode .item-price { color: #fff; }
body.night-mode .contact { background: linear-gradient(to top, #000, #1a1a1a); }
body.night-mode .contact a { color: #ff8c00; }

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
body.day-mode {
    background: linear-gradient(-45deg, #f5f5f5, #ffffff, #e8e8e8, #ffffff);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: #000;
}

body.day-mode .hero {
    background: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0.3)), 
                url('https://i.postimg.cc/k5TwQCVb/hero.jpg');
    background-size: cover;
    background-position: center;
}

body.day-mode .hero h1 { color: #333; }
body.day-mode .work-time { background: rgba(255,255,255,0.8); border: 1px solid #333; color: #333; }
body.day-mode .btn { background: #333; color: #fff; }
body.day-mode .card { background: rgba(255, 255, 255, 0.9); border: 1px solid #333; }
body.day-mode .card h3 { color: #333; border-bottom: 2px solid #333; }
body.day-mode .name { color: #333; }
body.day-mode .item-price { color: #ff8c00; }
body.day-mode .contact { background: linear-gradient(to top, #ddd, #f5f5f5); }
body.day-mode .contact a { color: #333; }

/* Ø§Ù„Ù‡ÙŠØ±Ùˆ */
.hero {
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: '';
    position: absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,140,0,0.1) 0%, transparent 50%);
    animation: rotate 20s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.hero h1 {
    font-size: clamp(40px, 15vw, 80px);
    margin: 0;
    cursor: pointer;
    user-select: none;
    position: relative;
    animation: floatTitle 3s ease-in-out infinite;
}

@keyframes floatTitle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.work-time {
    font-size: clamp(16px, 4vw, 20px);
    margin: 15px 0;
    padding: 8px 20px;
    border-radius: 30px;
    backdrop-filter: blur(5px);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.05); opacity: 0.9; }
}

.btn {
    border: none;
    padding: 12px 30px;
    font-size: clamp(16px, 4vw, 18px);
    font-weight: 600;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 10px;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn:hover::before {
    width: 300px;
    height: 300px;
}

.btn:hover {
    transform: translateY(-3px) scale(1.05);
}

/* Ø§Ù„Ù…Ù†ÙŠÙˆ */
.container {
    padding: 40px 15px;
    max-width: 1200px;
    margin: 0 auto;
    scroll-margin-top: 20px;
}

.container h2 {
    font-size: clamp(30px, 8vw, 40px);
    text-align: center;
    margin-bottom: 30px;
    animation: slideInDown 1s ease;
}

@keyframes slideInDown {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.card {
    backdrop-filter: blur(10px);
    padding: 20px;
    border-radius: 20px;
    margin: 20px 0;
    position: relative;
    transition: all 0.3s ease;
    animation: fadeInUp 0.8s ease;
    animation-fill-mode: both;
}

.card:nth-child(2) { animation-delay: 0.2s; }
.card:nth-child(3) { animation-delay: 0.4s; }
.card:nth-child(4) { animation-delay: 0.6s; }

@keyframes fadeInUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
}

.card h3 {
    font-size: clamp(22px, 6vw, 28px);
    margin-bottom: 15px;
    text-align: center;
    padding-bottom: 10px;
    padding-right: 40px;
    position: relative;
}

.card h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 2px;
    background: currentColor;
    transition: width 0.3s ease;
}

.card:hover h3::after {
    width: 100px;
}

.item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    padding: 8px 15px;
    background: rgba(0,0,0,0.1);
    border-radius: 10px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,140,0,0.2), transparent);
    transition: left 0.5s ease;
}

.item:hover::before {
    left: 100%;
}

.item:hover {
    transform: scale(1.02) translateX(5px);
    background: rgba(255,140,0,0.1);
}

.name {
    font-weight: 600;
    font-size: clamp(14px, 4vw, 16px);
}

.item-price {
    font-weight: bold;
    font-size: clamp(14px, 4vw, 16px);
    animation: pricePulse 2s ease-in-out infinite;
}

@keyframes pricePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); color: #ff8c00; }
}

/* Ø§Ù„Ø§ØªØµØ§Ù„ */
.contact {
    text-align: center;
    padding: 40px 15px;
    margin-top: 30px;
}

.contact h2 {
    font-size: clamp(30px, 8vw, 40px);
    margin-bottom: 20px;
}

.contact a { text-decoration: none; }

iframe {
    border-radius: 15px;
    margin-top: 20px;
    max-width: 100%;
    height: 250px;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
.control-buttons {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 8px;
    z-index: 1000;
}

.control-btn {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(5px);
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    -webkit-tap-highlight-color: transparent;
    animation: bounceIn 0.5s ease;
    border: 2px solid;
}

@keyframes bounceIn {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); opacity: 1; }
}

.control-btn:hover { transform: scale(1.1) rotate(5deg); }
.control-btn:active { transform: scale(0.95); }

body.night-mode .control-btn {
    background: rgba(255, 140, 0, 0.2);
    border-color: #ff8c00;
    color: #ff8c00;
}

body.day-mode .control-btn {
    background: rgba(51, 51, 51, 0.2);
    border-color: #333;
    color: #333;
}

@media (max-width: 768px) {
    .control-btn {
        width: 45px;
        height: 45px;
        font-size: 18px;
    }
}

/* Ø´Ø¹Ø§Ø± CANLI */
.live-badge {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(255, 0, 0, 0.9);
    color: #fff;
    padding: 6px 16px;
    border-radius: 30px;
    font-size: 14px;
    font-weight: bold;
    z-index: 100;
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 15px rgba(255,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.3);
    pointer-events: none;
    animation: livePulse 1.5s ease-in-out infinite;
}

@keyframes livePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@media (max-width: 768px) {
    .live-badge {
        top: 10px;
        left: 10px;
        font-size: 12px;
        padding: 5px 12px;
    }
}

/* Ø²Ø± Ø­Ø°Ù Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
.delete-card-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #dc3545;
    color: #fff;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    opacity: 0;
    z-index: 10;
}

.card:hover .delete-card-btn {
    opacity: 1;
}

@media (max-width: 768px) {
    .delete-card-btn {
        display: none !important;
    }
}

/* ===== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± ===== */
@media (max-width: 768px) {
    .dev-panel {
        display: none !important;
    }
}

.dev-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    background: rgba(20, 20, 20, 0.95);
    backdrop-filter: blur(15px);
    padding: 20px;
    border: 2px solid #ff8c00;
    border-radius: 20px;
    z-index: 2000;
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    cursor: move;
    user-select: none;
    color: #fff;
}

.dev-panel.open {
    transform: translate(-50%, -50%) scale(1);
}

.dev-panel-header {
    padding: 5px 10px 15px 10px;
    cursor: move;
    border-bottom: 1px solid rgba(255, 140, 0, 0.3);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.dev-panel-header h3 {
    color: #ff8c00;
    font-size: 24px;
    margin: 0;
}

.drag-indicator {
    color: rgba(255, 140, 0, 0.7);
    font-size: 20px;
}

.dev-section {
    margin: 15px 0;
    padding: 15px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 12px;
    border: 1px solid rgba(255, 140, 0, 0.3);
}

.dev-section:hover {
    transform: scale(1.02);
    border-color: #ff8c00;
}

.dev-panel input,
.dev-panel select {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(255, 140, 0, 0.3);
    color: #fff;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
}

.dev-panel button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    background: #ff8c00;
    border: none;
    color: #fff;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    transition: all 0.3s ease;
}

.dev-panel button:hover {
    transform: translateY(-2px) scale(1.02);
}

.dev-panel .save-btn { background: #28a745; }
.dev-panel .delete-btn { background: #dc3545; }
.dev-panel .close-btn { background: #6c757d; margin-top: 15px; }

/* ===== Ù‚Ø³Ù… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ===== */
.color-section {
    background: rgba(255, 140, 0, 0.15);
    border: 2px solid #ff8c00;
}

.color-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
}

.color-row input[type="color"] {
    width: 60px;
    height: 40px;
    padding: 2px;
    border: 2px solid #ff8c00;
    border-radius: 8px;
    cursor: pointer;
}

/* ===== Ù‚Ø³Ù… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ© - Ø¬Ø¯ÙŠØ¯ ===== */
.language-section {
    background: rgba(255, 140, 0, 0.15);
    border: 2px solid #ff8c00;
}

.language-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 15px;
}

.lang-tab {
    flex: 1;
    padding: 8px;
    background: rgba(255, 140, 0, 0.2);
    border: 1px solid #ff8c00;
    color: #ff8c00;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.lang-tab.active {
    background: #ff8c00;
    color: #fff;
}

.name-edit-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
    padding: 8px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
}

.name-edit-label {
    width: 100px;
    font-size: 14px;
    color: #ff8c00;
}

.name-edit-input {
    flex: 1;
    padding: 8px;
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(255, 140, 0, 0.3);
    color: #fff;
    border-radius: 8px;
}

.name-edit-input:focus {
    border-color: #ff8c00;
    outline: none;
}

.category-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 15px 0 5px;
    color: #ff8c00;
    font-weight: 600;
}

/* ===== Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ===== */
.status-message {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 10px;
    background: rgba(0,0,0,0.9);
    border: 2px solid;
    color: #fff;
    font-weight: 600;
    z-index: 3000;
    animation: slideInRight 0.3s ease;
    font-size: 14px;
    max-width: 90%;
}

@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.status-success { border-color: #28a745; }
.status-error { border-color: #dc3545; }
.status-loading { border-color: #ff8c00; }

/* ===== Ø£ÙˆØ¶Ø§Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ===== */
.delete-mode .item {
    cursor: pointer;
    position: relative;
}

.delete-mode .item:hover {
    background: rgba(255,0,0,0.2);
    border: 1px solid red;
}

.edit-mode .item-price {
    background: rgba(255,140,0,0.2);
    padding: 2px 8px;
    border-radius: 5px;
    cursor: text;
}

/* ===== ØªÙ„Ù…ÙŠØ­ F5 ===== */
.f5-hint {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255,140,0,0.2);
    border: 1px solid #ff8c00;
    padding: 8px 15px;
    border-radius: 30px;
    font-size: 12px;
    color: #ff8c00;
    backdrop-filter: blur(5px);
    z-index: 100;
    pointer-events: none;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

@media (max-width: 768px) {
    .f5-hint { display: none; }
}
</style>
</head>

<body class="night-mode" id="body" data-language="tr">

<!-- Ø´Ø§Ø±Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± -->
<div class="live-badge">ğŸ”´ CANLI</div>

<!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
<div class="control-buttons">
    <button class="control-btn" id="themeToggle">ğŸŒ“</button>
    <button class="control-btn" id="langToggle">TR</button>
</div>

<!-- ØªÙ„Ù…ÙŠØ­ F5 -->
<div class="f5-hint">ğŸ’» Ctrl+F5 - GeliÅŸtirici Paneli</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± -->
<div class="dev-panel" id="devPanel">
    <div class="dev-panel-header" id="panelHeader">
        <h3 class="panel-title">âš™ï¸ GeliÅŸtirici Paneli</h3>
        <div class="drag-indicator">â‹®â‹®</div>
    </div>
    
    <!-- ÃœrÃ¼n Ekle -->
    <div class="dev-section">
        <h4 class="section-title-add">â• ÃœrÃ¼n Ekle</h4>
        <select id="categorySelect"></select>
        <input type="text" id="productName" class="product-name-input" placeholder="ÃœrÃ¼n adÄ±">
        <input type="text" id="productPrice" class="product-price-input" placeholder="Fiyat">
        <button class="save-btn" id="addProductBtn">âœ… ÃœrÃ¼n Ekle</button>
    </div>
    
    <!-- Kategori Ekle -->
    <div class="dev-section">
        <h4 class="section-title-cat">ğŸ“ Kategori Ekle</h4>
        <input type="text" id="newCategory" class="new-category-input" placeholder="Yeni kategori adÄ±">
        <button class="save-btn" id="addCategoryBtn">ğŸ“ Kategori Ekle</button>
    </div>
    
    <!-- ===== Ù‚Ø³Ù… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ© (Ø¬Ø¯ÙŠØ¯) ===== -->
    <div class="dev-section language-section">
        <h4 class="section-title-names">ğŸ“ Ä°simleri DÃ¼zenle (TR/EN)</h4>
        
        <!-- Ø£Ù„Ø³Ù†Ø© Ø§Ù„Ù„ØºØ© -->
        <div class="language-tabs">
            <button class="lang-tab active" id="tabTurkish">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
            <button class="lang-tab" id="tabEnglish">ğŸ‡¬ğŸ‡§ English</button>
        </div>
        
        <!-- Ù‚Ø³Ù… ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª -->
        <div class="category-header">Kategoriler</div>
        <div id="categoryNamesContainer"></div>
        
        <!-- Ù‚Ø³Ù… ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
        <div class="category-header" style="margin-top: 20px;">ÃœrÃ¼nler</div>
        <div id="productNamesContainer"></div>
        
        <button class="save-btn" id="saveNamesBtn" style="margin-top: 15px;">ğŸ’¾ Ä°simleri Kaydet</button>
    </div>
    
    <!-- Renk DÃ¼zenle -->
    <div class="dev-section color-section">
        <h4 class="section-title-color">ğŸ¨ Renkleri DÃ¼zenle</h4>
        
        <div class="color-row">
            <label class="color-label-cat">Kategori BaÅŸlÄ±ÄŸÄ±</label>
            <input type="color" id="colorCategory" value="#ff8c00">
        </div>
        
        <div class="color-row">
            <label class="color-label-name">ÃœrÃ¼n AdÄ±</label>
            <input type="color" id="colorName" value="#ff8c00">
        </div>
        
        <div class="color-row">
            <label class="color-label-price">Fiyat</label>
            <input type="color" id="colorPrice" value="#ffffff">
        </div>
        
        <div class="color-row">
            <label class="color-label-btn">Buton Rengi</label>
            <input type="color" id="colorButton" value="#ff8c00">
        </div>
        
        <button class="save-btn" id="applyColorsBtn">ğŸ¨ Renkleri Uygula</button>
        <button class="delete-btn" id="resetColorsBtn">ğŸ”„ SÄ±fÄ±rla</button>
    </div>
    
    <!-- AraÃ§lar -->
    <div class="dev-section">
        <h4 class="section-title-tools">ğŸ”§ AraÃ§lar</h4>
        <button class="delete-btn" id="deleteModeBtn">ğŸ—‘ï¸ ÃœrÃ¼n Silme Modu</button>
        <button class="save-btn" id="editModeBtn">âœï¸ Fiyat DÃ¼zenleme Modu</button>
        <button class="save-btn" id="instagramBtn">ğŸ“· Instagram GÃ¼ncelle</button>
        <button class="save-btn" id="locationBtn">ğŸ“ Konum GÃ¼ncelle</button>
    </div>
    
    <!-- Supabase + CanlÄ± YayÄ±n -->
    <div class="dev-section">
        <h4 class="section-title-broadcast">ğŸ“¡ CanlÄ± YayÄ±n</h4>
        <button class="save-btn" id="broadcastBtn" style="background: #0066cc;">
            ğŸŒ Herkese GÃ¶nder
        </button>
        <div class="broadcast-text" style="font-size:12px; color:#aaa; text-align:center;">
            TÃ¼m deÄŸiÅŸiklikler anÄ±nda herkese ulaÅŸÄ±r
        </div>
    </div>
    
    <button class="close-btn" id="closePanelBtn">âŒ Kapat</button>
</div>

<!-- Ana Ä°Ã§erik -->
<div class="main-content">
    <section class="hero">
        <h1 id="logo">Tosttoo</h1>
        <div class="work-time" id="workTime">ğŸ•’ 08:00 - 02:30</div>
        <button class="btn" id="menuBtn">MenÃ¼yÃ¼ GÃ¶r</button>
    </section>

    <div class="container" id="menu">
        <h2 id="menuTitle">ğŸ½ï¸ MenÃ¼</h2>
        
        <div class="card" id="card1">
            <h3 id="cat1">ğŸ¥ª Tostlar</h3>
            <button class="delete-card-btn" data-card="1">âœ•</button>
            <div class="item"><span class="name" id="item1">KaÅŸarlÄ± Tost</span><span class="item-price">60â‚º</span></div>
            <div class="item"><span class="name" id="item2">Sucuklu Tost</span><span class="item-price">75â‚º</span></div>
            <div class="item"><span class="name" id="item3">KarÄ±ÅŸÄ±k Tost</span><span class="item-price">85â‚º</span></div>
        </div>
        
        <div class="card" id="card2">
            <h3 id="cat2">ğŸ¥¤ Ä°Ã§ecekler</h3>
            <button class="delete-card-btn" data-card="2">âœ•</button>
            <div class="item"><span class="name" id="item4">Ã‡ay</span><span class="item-price">10â‚º</span></div>
            <div class="item"><span class="name" id="item5">Kahve</span><span class="item-price">15â‚º</span></div>
            <div class="item"><span class="name" id="item6">Meyve Suyu</span><span class="item-price">20â‚º</span></div>
        </div>
        
        <div class="card" id="card3">
            <h3 id="cat3">ğŸ° TatlÄ±lar</h3>
            <button class="delete-card-btn" data-card="3">âœ•</button>
            <div class="item"><span class="name" id="item7">KÃ¼nefe</span><span class="item-price">50â‚º</span></div>
            <div class="item"><span class="name" id="item8">Baklava</span><span class="item-price">45â‚º</span></div>
            <div class="item"><span class="name" id="item9">SÃ¼tlaÃ§</span><span class="item-price">30â‚º</span></div>
        </div>
    </div>

    <section class="contact">
        <h2 id="contactTitle">ğŸ“ Ä°letiÅŸim</h2>
        <p>ğŸ“ <a href="tel:05321580207">0532 158 0207</a></p>
        <p>ğŸ“· <a id="instaLink" href="https://www.instagram.com/tosttooyevski/" target="_blank">Instagram</a></p>
        <div class="map-container">
            <iframe id="mapFrame" src="https://www.google.com/maps?q=36.484479,32.101147&output=embed" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
    </section>
</div>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// ===== SUPABASE =====
const supabaseUrl = "https://cufbyiefzbgygtyibupl.supabase.co";
const supabaseKey = "sb_publishable_mTI9Fl-eMcN3TbLqyQAGNw_fzQF7ssr";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// ===== CANLI YAYIN KANALI =====
const broadcastChannel = supabase.channel('menu-updates', {
    config: { broadcast: { self: true } }
});

broadcastChannel
    .on('broadcast', { event: 'menu-changed' }, (payload) => {
        console.log('ğŸ”„ CanlÄ± gÃ¼ncelleme:', payload);
        if (payload.payload.type === 'menu') {
            document.getElementById('menu').innerHTML = payload.payload.data;
            updateCategorySelect();
            showStatus('ğŸ“‹ MenÃ¼ gÃ¼ncellendi!', 'success');
        }
        if (payload.payload.type === 'instagram') {
            document.getElementById('instaLink').href = payload.payload.data;
        }
        if (payload.payload.type === 'location') {
            document.getElementById('mapFrame').src = payload.payload.data;
        }
        if (payload.payload.type === 'colors') {
            applyColorsFromData(payload.payload.data);
        }
        if (payload.payload.type === 'names') {
            loadNamesFromData(payload.payload.data);
        }
    })
    .subscribe();

// ===== DEÄÄ°ÅKENLER =====
let deleteMode = false;
let editMode = false;
let clickCount = 0;
let ctrlPressed = false;
let isDragging = false;
let xOffset = 0, yOffset = 0;
let currentNameLang = 'tr'; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ (tr/en)

// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± (Ù„Ù„Ø­ÙØ¸)
let categoryNames = {
    tr: {},
    en: {}
};

let productNames = {
    tr: {},
    en: {}
};

// VarsayÄ±lan renkler
const defaultColors = {
    category: '#ff8c00',
    name: '#ff8c00',
    price: '#ffffff',
    button: '#ff8c00'
};

// VarsayÄ±lan isimler
const defaultNames = {
    tr: {
        cat1: "ğŸ¥ª Tostlar",
        cat2: "ğŸ¥¤ Ä°Ã§ecekler",
        cat3: "ğŸ° TatlÄ±lar",
        item1: "KaÅŸarlÄ± Tost",
        item2: "Sucuklu Tost",
        item3: "KarÄ±ÅŸÄ±k Tost",
        item4: "Ã‡ay",
        item5: "Kahve",
        item6: "Meyve Suyu",
        item7: "KÃ¼nefe",
        item8: "Baklava",
        item9: "SÃ¼tlaÃ§"
    },
    en: {
        cat1: "ğŸ¥ª Toasts",
        cat2: "ğŸ¥¤ Drinks",
        cat3: "ğŸ° Desserts",
        item1: "Cheese Toast",
        item2: "Sausage Toast",
        item3: "Mixed Toast",
        item4: "Tea",
        item5: "Coffee",
        item6: "Juice",
        item7: "Kunefe",
        item8: "Baklava",
        item9: "Rice Pudding"
    }
};

const translations = {
    tr: {
        workTime: "ğŸ•’ 08:00 - 02:30",
        menuBtn: "MenÃ¼yÃ¼ GÃ¶r",
        menuTitle: "ğŸ½ï¸ MenÃ¼",
        cat1: "ğŸ¥ª Tostlar",
        cat2: "ğŸ¥¤ Ä°Ã§ecekler",
        cat3: "ğŸ° TatlÄ±lar",
        item1: "KaÅŸarlÄ± Tost",
        item2: "Sucuklu Tost",
        item3: "KarÄ±ÅŸÄ±k Tost",
        item4: "Ã‡ay",
        item5: "Kahve",
        item6: "Meyve Suyu",
        item7: "KÃ¼nefe",
        item8: "Baklava",
        item9: "SÃ¼tlaÃ§",
        contactTitle: "ğŸ“ Ä°letiÅŸim",
        panelTitle: "âš™ï¸ GeliÅŸtirici Paneli",
        sectionAdd: "â• ÃœrÃ¼n Ekle",
        productNamePlaceholder: "ÃœrÃ¼n adÄ±",
        productPricePlaceholder: "Fiyat",
        addProductBtn: "âœ… ÃœrÃ¼n Ekle",
        sectionCat: "ğŸ“ Kategori Ekle",
        newCategoryPlaceholder: "Yeni kategori adÄ±",
        addCategoryBtn: "ğŸ“ Kategori Ekle",
        sectionNames: "ğŸ“ Ä°simleri DÃ¼zenle (TR/EN)",
        sectionColor: "ğŸ¨ Renkleri DÃ¼zenle",
        colorLabelCat: "Kategori BaÅŸlÄ±ÄŸÄ±",
        colorLabelName: "ÃœrÃ¼n AdÄ±",
        colorLabelPrice: "Fiyat",
        colorLabelBtn: "Buton Rengi",
        applyColorsBtn: "ğŸ¨ Renkleri Uygula",
        resetColorsBtn: "ğŸ”„ SÄ±fÄ±rla",
        sectionTools: "ğŸ”§ AraÃ§lar",
        deleteModeBtn: "ğŸ—‘ï¸ ÃœrÃ¼n Silme Modu",
        editModeBtn: "âœï¸ Fiyat DÃ¼zenleme Modu",
        instagramBtn: "ğŸ“· Instagram GÃ¼ncelle",
        locationBtn: "ğŸ“ Konum GÃ¼ncelle",
        sectionBroadcast: "ğŸ“¡ CanlÄ± YayÄ±n",
        broadcastBtn: "ğŸŒ Herkese GÃ¶nder",
        broadcastText: "TÃ¼m deÄŸiÅŸiklikler anÄ±nda herkese ulaÅŸÄ±r",
        closeBtn: "âŒ Kapat",
        tabTurkish: "ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e",
        tabEnglish: "ğŸ‡¬ğŸ‡§ English",
        saveNamesBtn: "ğŸ’¾ Ä°simleri Kaydet",
        categories: "Kategoriler",
        products: "ÃœrÃ¼nler"
    },
    en: {
        workTime: "ğŸ•’ 08:00 - 02:30",
        menuBtn: "View Menu",
        menuTitle: "ğŸ½ï¸ Menu",
        cat1: "ğŸ¥ª Toasts",
        cat2: "ğŸ¥¤ Drinks",
        cat3: "ğŸ° Desserts",
        item1: "Cheese Toast",
        item2: "Sausage Toast",
        item3: "Mixed Toast",
        item4: "Tea",
        item5: "Coffee",
        item6: "Juice",
        item7: "Kunefe",
        item8: "Baklava",
        item9: "Rice Pudding",
        contactTitle: "ğŸ“ Contact",
        panelTitle: "âš™ï¸ Developer Panel",
        sectionAdd: "â• Add Product",
        productNamePlaceholder: "Product name",
        productPricePlaceholder: "Price",
        addProductBtn: "âœ… Add Product",
        sectionCat: "ğŸ“ Add Category",
        newCategoryPlaceholder: "New category name",
        addCategoryBtn: "ğŸ“ Add Category",
        sectionNames: "ğŸ“ Edit Names (TR/EN)",
        sectionColor: "ğŸ¨ Edit Colors",
        colorLabelCat: "Category Title",
        colorLabelName: "Product Name",
        colorLabelPrice: "Price",
        colorLabelBtn: "Button Color",
        applyColorsBtn: "ğŸ¨ Apply Colors",
        resetColorsBtn: "ğŸ”„ Reset",
        sectionTools: "ğŸ”§ Tools",
        deleteModeBtn: "ğŸ—‘ï¸ Delete Mode",
        editModeBtn: "âœï¸ Edit Mode",
        instagramBtn: "ğŸ“· Update Instagram",
        locationBtn: "ğŸ“ Update Location",
        sectionBroadcast: "ğŸ“¡ Live Broadcast",
        broadcastBtn: "ğŸŒ Send to All",
        broadcastText: "All changes instantly reach everyone",
        closeBtn: "âŒ Close",
        tabTurkish: "ğŸ‡¹ğŸ‡· Turkish",
        tabEnglish: "ğŸ‡¬ğŸ‡§ English",
        saveNamesBtn: "ğŸ’¾ Save Names",
        categories: "Categories",
        products: "Products"
    }
};

// ===== CÄ°HAZ KONTROLÃœ =====
function isMobile() {
    return window.innerWidth <= 768;
}

// ===== TEMEL =====
function scrollToMenu() {
    document.getElementById("menu").scrollIntoView({behavior: "smooth"});
}

// ===== Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© =====
function toggleLanguage() {
    const body = document.getElementById('body');
    const langToggle = document.getElementById('langToggle');
    const currentLang = body.getAttribute('data-language');
    
    if(currentLang === 'tr') {
        body.setAttribute('data-language', 'en');
        langToggle.innerText = 'EN';
        applyLanguage('en');
        localStorage.setItem('language', 'en');
        showStatus('ğŸ‡¬ğŸ‡§ English mode active', 'success');
    } else {
        body.setAttribute('data-language', 'tr');
        langToggle.innerText = 'TR';
        applyLanguage('tr');
        localStorage.setItem('language', 'tr');
        showStatus('ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e mod aktif', 'success');
    }
}

// ===== Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„ÙˆØ¶Ø¹ =====
function toggleTheme() {
    const body = document.getElementById('body');
    const themeToggle = document.getElementById('themeToggle');
    
    if(body.classList.contains('night-mode')) {
        body.classList.remove('night-mode');
        body.classList.add('day-mode');
        themeToggle.innerText = 'ğŸŒ';
        localStorage.setItem('theme', 'day');
        showStatus('ğŸŒ GÃ¼ndÃ¼z modu aktif', 'success');
    } else {
        body.classList.remove('day-mode');
        body.classList.add('night-mode');
        themeToggle.innerText = 'ğŸŒ“';
        localStorage.setItem('theme', 'night');
        showStatus('ğŸŒ™ Gece modu aktif', 'success');
    }
}

// ===== ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ© =====
function applyLanguage(lang) {
    const t = translations[lang];
    
    document.getElementById('workTime').innerText = t.workTime;
    document.getElementById('menuBtn').innerText = t.menuBtn;
    document.getElementById('menuTitle').innerText = t.menuTitle;
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    document.getElementById('cat1').innerText = categoryNames[lang]?.cat1 || defaultNames[lang].cat1;
    document.getElementById('cat2').innerText = categoryNames[lang]?.cat2 || defaultNames[lang].cat2;
    document.getElementById('cat3').innerText = categoryNames[lang]?.cat3 || defaultNames[lang].cat3;
    document.getElementById('item1').innerText = productNames[lang]?.item1 || defaultNames[lang].item1;
    document.getElementById('item2').innerText = productNames[lang]?.item2 || defaultNames[lang].item2;
    document.getElementById('item3').innerText = productNames[lang]?.item3 || defaultNames[lang].item3;
    document.getElementById('item4').innerText = productNames[lang]?.item4 || defaultNames[lang].item4;
    document.getElementById('item5').innerText = productNames[lang]?.item5 || defaultNames[lang].item5;
    document.getElementById('item6').innerText = productNames[lang]?.item6 || defaultNames[lang].item6;
    document.getElementById('item7').innerText = productNames[lang]?.item7 || defaultNames[lang].item7;
    document.getElementById('item8').innerText = productNames[lang]?.item8 || defaultNames[lang].item8;
    document.getElementById('item9').innerText = productNames[lang]?.item9 || defaultNames[lang].item9;
    
    document.getElementById('contactTitle').innerText = t.contactTitle;
    
    if(!isMobile() && document.querySelector('.panel-title')) {
        document.querySelector('.panel-title').innerText = t.panelTitle;
        document.querySelector('.section-title-add').innerText = t.sectionAdd;
        document.querySelector('.product-name-input').placeholder = t.productNamePlaceholder;
        document.querySelector('.product-price-input').placeholder = t.productPricePlaceholder;
        document.getElementById('addProductBtn').innerText = t.addProductBtn;
        document.querySelector('.section-title-cat').innerText = t.sectionCat;
        document.querySelector('.new-category-input').placeholder = t.newCategoryPlaceholder;
        document.getElementById('addCategoryBtn').innerText = t.addCategoryBtn;
        document.querySelector('.section-title-names').innerText = t.sectionNames;
        document.getElementById('tabTurkish').innerText = t.tabTurkish;
        document.getElementById('tabEnglish').innerText = t.tabEnglish;
        document.getElementById('saveNamesBtn').innerText = t.saveNamesBtn;
        document.querySelector('.section-title-color').innerText = t.sectionColor;
        document.querySelector('.color-label-cat').innerText = t.colorLabelCat;
        document.querySelector('.color-label-name').innerText = t.colorLabelName;
        document.querySelector('.color-label-price').innerText = t.colorLabelPrice;
        document.querySelector('.color-label-btn').innerText = t.colorLabelBtn;
        document.getElementById('applyColorsBtn').innerText = t.applyColorsBtn;
        document.getElementById('resetColorsBtn').innerText = t.resetColorsBtn;
        document.querySelector('.section-title-tools').innerText = t.sectionTools;
        document.getElementById('deleteModeBtn').innerText = t.deleteModeBtn;
        document.getElementById('editModeBtn').innerText = t.editModeBtn;
        document.getElementById('instagramBtn').innerText = t.instagramBtn;
        document.getElementById('locationBtn').innerText = t.locationBtn;
        document.querySelector('.section-title-broadcast').innerText = t.sectionBroadcast;
        document.getElementById('broadcastBtn').innerText = t.broadcastBtn;
        document.querySelector('.broadcast-text').innerText = t.broadcastText;
        document.getElementById('closePanelBtn').innerText = t.closeBtn;
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ù‚ÙˆÙ„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
        updateNameInputs();
    }
}

// ===== Ø¯ÙˆØ§Ù„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ© =====
function initNameEditing() {
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    loadSavedNames();
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø£Ù„Ø³Ù†Ø©
    document.getElementById('tabTurkish').addEventListener('click', () => switchNameLang('tr'));
    document.getElementById('tabEnglish').addEventListener('click', () => switchNameLang('en'));
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    createNameInputs();
    
    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„ØªØ±ÙƒÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
    switchNameLang('tr');
}

function loadSavedNames() {
    // ØªØ­Ù…ÙŠÙ„ Ù…Ù† localStorage Ø¥Ø°Ø§ ÙˆØ¬Ø¯
    const savedCategoryNames = localStorage.getItem('categoryNames');
    const savedProductNames = localStorage.getItem('productNames');
    
    if(savedCategoryNames) {
        categoryNames = JSON.parse(savedCategoryNames);
    } else {
        categoryNames = {
            tr: {
                cat1: defaultNames.tr.cat1,
                cat2: defaultNames.tr.cat2,
                cat3: defaultNames.tr.cat3
            },
            en: {
                cat1: defaultNames.en.cat1,
                cat2: defaultNames.en.cat2,
                cat3: defaultNames.en.cat3
            }
        };
    }
    
    if(savedProductNames) {
        productNames = JSON.parse(savedProductNames);
    } else {
        productNames = {
            tr: {
                item1: defaultNames.tr.item1,
                item2: defaultNames.tr.item2,
                item3: defaultNames.tr.item3,
                item4: defaultNames.tr.item4,
                item5: defaultNames.tr.item5,
                item6: defaultNames.tr.item6,
                item7: defaultNames.tr.item7,
                item8: defaultNames.tr.item8,
                item9: defaultNames.tr.item9
            },
            en: {
                item1: defaultNames.en.item1,
                item2: defaultNames.en.item2,
                item3: defaultNames.en.item3,
                item4: defaultNames.en.item4,
                item5: defaultNames.en.item5,
                item6: defaultNames.en.item6,
                item7: defaultNames.en.item7,
                item8: defaultNames.en.item8,
                item9: defaultNames.en.item9
            }
        };
    }
}

function createNameInputs() {
    const categoryContainer = document.getElementById('categoryNamesContainer');
    const productContainer = document.getElementById('productNamesContainer');
    
    categoryContainer.innerHTML = '';
    productContainer.innerHTML = '';
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù‚ÙˆÙ„ Ù„Ù„ÙØ¦Ø§Øª
    for(let i = 1; i <= 3; i++) {
        const row = document.createElement('div');
        row.className = 'name-edit-row';
        row.innerHTML = `
            <span class="name-edit-label">Kategori ${i}:</span>
            <input type="text" class="name-edit-input" id="editCat${i}" data-type="cat" data-index="${i}" value="">
        `;
        categoryContainer.appendChild(row);
    }
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù‚ÙˆÙ„ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª
    for(let i = 1; i <= 9; i++) {
        const row = document.createElement('div');
        row.className = 'name-edit-row';
        row.innerHTML = `
            <span class="name-edit-label">ÃœrÃ¼n ${i}:</span>
            <input type="text" class="name-edit-input" id="editItem${i}" data-type="item" data-index="${i}" value="">
        `;
        productContainer.appendChild(row);
    }
}

function switchNameLang(lang) {
    currentNameLang = lang;
    
    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ù„Ø³Ù†Ø©
    document.getElementById('tabTurkish').classList.toggle('active', lang === 'tr');
    document.getElementById('tabEnglish').classList.toggle('active', lang === 'en');
    
    // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    updateNameInputs();
}

function updateNameInputs() {
    // ØªØ­Ø¯ÙŠØ« Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ¦Ø§Øª
    for(let i = 1; i <= 3; i++) {
        const input = document.getElementById(`editCat${i}`);
        if(input) {
            const key = `cat${i}`;
            input.value = categoryNames[currentNameLang]?.[key] || defaultNames[currentNameLang][key];
        }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    for(let i = 1; i <= 9; i++) {
        const input = document.getElementById(`editItem${i}`);
        if(input) {
            const key = `item${i}`;
            input.value = productNames[currentNameLang]?.[key] || defaultNames[currentNameLang][key];
        }
    }
}

function saveNames() {
    // Ø­ÙØ¸ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    for(let i = 1; i <= 3; i++) {
        const input = document.getElementById(`editCat${i}`);
        if(input) {
            const key = `cat${i}`;
            if(!categoryNames[currentNameLang]) categoryNames[currentNameLang] = {};
            categoryNames[currentNameLang][key] = input.value;
        }
    }
    
    // Ø­ÙØ¸ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    for(let i = 1; i <= 9; i++) {
        const input = document.getElementById(`editItem${i}`);
        if(input) {
            const key = `item${i}`;
            if(!productNames[currentNameLang]) productNames[currentNameLang] = {};
            productNames[currentNameLang][key] = input.value;
        }
    }
    
    // Ø­ÙØ¸ ÙÙŠ localStorage
    localStorage.setItem('categoryNames', JSON.stringify(categoryNames));
    localStorage.setItem('productNames', JSON.stringify(productNames));
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
    const currentPageLang = document.getElementById('body').getAttribute('data-language');
    applyLanguage(currentPageLang);
    
    showStatus(`âœ… Ä°simler (${currentNameLang === 'tr' ? 'TÃ¼rkÃ§e' : 'English'}) kaydedildi!`, 'success');
}

function loadNamesFromData(data) {
    if(data.categoryNames) {
        categoryNames = data.categoryNames;
        localStorage.setItem('categoryNames', JSON.stringify(categoryNames));
    }
    if(data.productNames) {
        productNames = data.productNames;
        localStorage.setItem('productNames', JSON.stringify(productNames));
    }
    const currentPageLang = document.getElementById('body').getAttribute('data-language');
    applyLanguage(currentPageLang);
    updateNameInputs();
}

// ===== Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± =====
function openDevPanel() {
    if(isMobile()) return;
    document.getElementById('devPanel').classList.add('open');
    updateCategorySelect();
    loadColors();
    initNameEditing(); // ØªÙ‡ÙŠØ¦Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
}

function closeDevPanel() {
    document.getElementById('devPanel').classList.remove('open');
    document.body.classList.remove('delete-mode', 'edit-mode');
    document.querySelectorAll('.item-price').forEach(el => el.contentEditable = false);
}

function updateCategorySelect() {
    const select = document.getElementById('categorySelect');
    select.innerHTML = '';
    document.querySelectorAll('.card').forEach((card, i) => {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = card.querySelector('h3').innerText;
        select.appendChild(opt);
    });
}

function addCategory() {
    if(isMobile()) return;
    const name = document.getElementById('newCategory').value.trim();
    if(!name) { showStatus('Kategori adÄ± girin!', 'error'); return; }
    
    const menu = document.getElementById('menu');
    const card = document.createElement('div');
    card.className = 'card';
    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-card-btn';
    deleteBtn.innerHTML = 'âœ•';
    deleteBtn.onclick = function() { deleteCard(this); };
    card.innerHTML = `<h3>${name}</h3>`;
    card.appendChild(deleteBtn);
    menu.appendChild(card);
    
    document.getElementById('newCategory').value = '';
    updateCategorySelect();
    saveAndBroadcast();
}

function addProduct() {
    if(isMobile()) return;
    const cat = document.getElementById('categorySelect').value;
    const name = document.getElementById('productName').value.trim();
    let price = document.getElementById('productPrice').value.trim();
    
    if(!name || !price) { showStatus('ÃœrÃ¼n adÄ± ve fiyat girin!', 'error'); return; }
    if(!price.includes('â‚º')) price = price + 'â‚º';
    
    const item = document.createElement('div');
    item.className = 'item';
    item.innerHTML = `<span class="name">${name}</span><span class="item-price">${price}</span>`;
    
    document.querySelectorAll('.card')[cat].appendChild(item);
    document.getElementById('productName').value = '';
    document.getElementById('productPrice').value = '';
    saveAndBroadcast();
}

function deleteCard(btn) {
    if(isMobile()) return;
    if(confirm('Bu kategoriyi silmek istediÄŸinize emin misiniz?')) {
        btn.closest('.card').remove();
        updateCategorySelect();
        saveAndBroadcast();
    }
}

function loadColors() {
    if(isMobile()) return;
    document.getElementById('colorCategory').value = localStorage.getItem('colorCategory') || defaultColors.category;
    document.getElementById('colorName').value = localStorage.getItem('colorName') || defaultColors.name;
    document.getElementById('colorPrice').value = localStorage.getItem('colorPrice') || defaultColors.price;
    document.getElementById('colorButton').value = localStorage.getItem('colorButton') || defaultColors.button;
    applyColors();
}

function applyColors() {
    const colors = {
        category: document.getElementById('colorCategory').value,
        name: document.getElementById('colorName').value,
        price: document.getElementById('colorPrice').value,
        button: document.getElementById('colorButton').value
    };
    
    document.querySelectorAll('.card h3').forEach(el => el.style.color = colors.category);
    document.querySelectorAll('.name').forEach(el => el.style.color = colors.name);
    document.querySelectorAll('.item-price').forEach(el => el.style.color = colors.price);
    document.querySelectorAll('.btn, .dev-panel button:not(.save-btn):not(.delete-btn):not(.close-btn)').forEach(el => {
        el.style.background = colors.button;
    });
    
    Object.keys(colors).forEach(key => localStorage.setItem('color' + key, colors[key]));
}

function applyColorsFromData(colors) {
    document.querySelectorAll('.card h3').forEach(el => el.style.color = colors.category);
    document.querySelectorAll('.name').forEach(el => el.style.color = colors.name);
    document.querySelectorAll('.item-price').forEach(el => el.style.color = colors.price);
    document.querySelectorAll('.btn, .dev-panel button:not(.save-btn):not(.delete-btn):not(.close-btn)').forEach(el => {
        el.style.background = colors.button;
    });
}

function resetColors() {
    if(isMobile()) return;
    document.getElementById('colorCategory').value = defaultColors.category;
    document.getElementById('colorName').value = defaultColors.name;
    document.getElementById('colorPrice').value = defaultColors.price;
    document.getElementById('colorButton').value = defaultColors.button;
    applyColors();
    saveAndBroadcast();
}

function toggleDeleteMode() {
    if(isMobile()) return;
    deleteMode = !deleteMode;
    document.body.classList.toggle('delete-mode', deleteMode);
    if(deleteMode) {
        document.body.classList.remove('edit-mode');
        editMode = false;
        showStatus('ğŸ—‘ï¸ Silme modu aktif - ÃœrÃ¼nlere tÄ±klayÄ±n', 'success');
    } else {
        showStatus('ğŸ”’ Silme modu kapalÄ±', 'success');
    }
}

function toggleEditMode() {
    if(isMobile()) return;
    editMode = !editMode;
    document.body.classList.toggle('edit-mode', editMode);
    if(editMode) {
        document.body.classList.remove('delete-mode');
        deleteMode = false;
        document.querySelectorAll('.item-price').forEach(el => el.contentEditable = true);
        showStatus('âœï¸ DÃ¼zenleme modu aktif - FiyatlarÄ± deÄŸiÅŸtirin', 'success');
    } else {
        document.querySelectorAll('.item-price').forEach(el => el.contentEditable = false);
        showStatus('ğŸ”’ DÃ¼zenleme modu kapalÄ±', 'success');
    }
}

function updateInstagram() {
    if(isMobile()) return;
    const link = prompt('Yeni Instagram linki:', 'https://www.instagram.com/tosttooyevski/');
    if(link) {
        document.getElementById('instaLink').href = link;
        saveAndBroadcast();
    }
}

function updateLocation() {
    if(isMobile()) return;
    const loc = prompt('Yeni konum (Ã¶rn: 36.484479,32.101147):');
    if(loc) {
        document.getElementById('mapFrame').src = `https://www.google.com/maps?q=${loc}&output=embed`;
        saveAndBroadcast();
    }
}

async function saveAndBroadcast() {
    if(isMobile()) return;
    showStatus('ğŸ”„ Kaydediliyor...', 'loading');
    
    try {
        const data = {
            menu: document.getElementById('menu').innerHTML,
            instagram: document.getElementById('instaLink').href,
            location: document.getElementById('mapFrame').src,
            colors: {
                category: document.getElementById('colorCategory')?.value || defaultColors.category,
                name: document.getElementById('colorName')?.value || defaultColors.name,
                price: document.getElementById('colorPrice')?.value || defaultColors.price,
                button: document.getElementById('colorButton')?.value || defaultColors.button
            },
            categoryNames: categoryNames,
            productNames: productNames
        };
        
        await supabase.from('settings').update({
            menu_data: data.menu,
            instagram: data.instagram,
            location: data.location,
            colors: JSON.stringify(data.colors),
            category_names: JSON.stringify(data.categoryNames),
            product_names: JSON.stringify(data.productNames)
        }).eq('id', 1);
        
        await broadcastChannel.send({ type: 'broadcast', event: 'menu-changed', payload: { type: 'menu', data: data.menu } });
        await broadcastChannel.send({ type: 'broadcast', event: 'menu-changed', payload: { type: 'instagram', data: data.instagram } });
        await broadcastChannel.send({ type: 'broadcast', event: 'menu-changed', payload: { type: 'location', data: data.location } });
        await broadcastChannel.send({ type: 'broadcast', event: 'menu-changed', payload: { type: 'colors', data: data.colors } });
        await broadcastChannel.send({ type: 'broadcast', event: 'menu-changed', payload: { type: 'names', data: { categoryNames, productNames } } });
        
        showStatus('âœ… Herkese gÃ¶nderildi!', 'success');
    } catch(err) {
        console.error(err);
        showStatus('âŒ Hata!', 'error');
    }
}

function showStatus(msg, type) {
    const old = document.querySelector('.status-message');
    if(old) old.remove();
    
    const div = document.createElement('div');
    div.className = `status-message status-${type}`;
    div.innerText = msg;
    document.body.appendChild(div);
    setTimeout(() => div.remove(), 3000);
}

// ===== Ø³Ø­Ø¨ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± =====
function initDragging() {
    if(isMobile()) return;
    const panel = document.getElementById('devPanel');
    const header = document.getElementById('panelHeader');
    
    header.addEventListener('mousedown', startDrag);
    document.addEventListener('mousemove', drag);
    document.addEventListener('mouseup', stopDrag);
    
    function startDrag(e) {
        if(e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'BUTTON') return;
        isDragging = true;
        xOffset = e.clientX - panel.offsetLeft;
        yOffset = e.clientY - panel.offsetTop;
        panel.style.transition = 'none';
    }
    
    function drag(e) {
        if(!isDragging) return;
        e.preventDefault();
        panel.style.left = (e.clientX - xOffset) + 'px';
        panel.style.top = (e.clientY - yOffset) + 'px';
        panel.style.transform = 'none';
    }
    
    function stopDrag() {
        isDragging = false;
        panel.style.transition = 'box-shadow 0.3s ease';
    }
}

// ===== Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± =====
document.addEventListener('DOMContentLoaded', function() {
    console.log("âœ… Ø§Ù„ØµÙØ­Ø© ØªØ­Ù…Ù‘Ù„ØªØŒ Ø¬Ø§Ø±ÙŠ Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±...");
    
    // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    document.getElementById('langToggle').addEventListener('click', toggleLanguage);
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    document.getElementById('menuBtn').addEventListener('click', scrollToMenu);
    
    // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± (Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙ‚Ø·)
    if(!isMobile()) {
        document.getElementById('addProductBtn').addEventListener('click', addProduct);
        document.getElementById('addCategoryBtn').addEventListener('click', addCategory);
        document.getElementById('applyColorsBtn').addEventListener('click', applyColors);
        document.getElementById('resetColorsBtn').addEventListener('click', resetColors);
        document.getElementById('deleteModeBtn').addEventListener('click', toggleDeleteMode);
        document.getElementById('editModeBtn').addEventListener('click', toggleEditMode);
        document.getElementById('instagramBtn').addEventListener('click', updateInstagram);
        document.getElementById('locationBtn').addEventListener('click', updateLocation);
        document.getElementById('broadcastBtn').addEventListener('click', saveAndBroadcast);
        document.getElementById('closePanelBtn').addEventListener('click', closeDevPanel);
        document.getElementById('saveNamesBtn').addEventListener('click', saveNames);
        
        document.querySelectorAll('.delete-card-btn').forEach(btn => {
            btn.addEventListener('click', function() { deleteCard(this); });
        });
        
        initDragging();
    }
    
    // ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø¨Ù€ 5 Ù†Ù‚Ø±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¹Ø§Ø±
    document.getElementById('logo').addEventListener('click', function() {
        if(isMobile()) return;
        clickCount++;
        setTimeout(() => clickCount = 0, 3000);
        if(clickCount === 5) {
            const pass = prompt("ğŸ” Åifre:");
            if(pass === "momotunc0702") {
                openDevPanel();
                showStatus("âœ… HoÅŸ geldiniz!", "success");
            }
        }
    });
    
    // Ù…ØªØ§Ø¨Ø¹Ø© Ctrl
    document.addEventListener('keydown', e => { if(e.key === 'Control') ctrlPressed = true; });
    document.addEventListener('keyup', e => { if(e.key === 'Control') ctrlPressed = false; });
    
    // Ctrl+F5 Ù„ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±
    document.addEventListener('keydown', function(e) {
        if(isMobile()) return;
        if(e.key === 'F5' && ctrlPressed) {
            e.preventDefault();
            const pass = prompt("ğŸ” Åifre (Ctrl+F5):");
            if(pass === "momotunc0702") {
                openDevPanel();
                showStatus("âœ… HoÅŸ geldiniz!", "success");
            }
        }
    });
    
    // Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø°Ù
    document.addEventListener('click', function(e) {
        if(isMobile() || !deleteMode) return;
        const item = e.target.closest('.item');
        if(item && !e.target.classList.contains('delete-card-btn')) {
            if(confirm('Bu Ã¼rÃ¼nÃ¼ silmek istediÄŸinize emin misiniz?')) {
                item.remove();
                saveAndBroadcast();
                showStatus('âœ… ÃœrÃ¼n silindi!', 'success');
            }
        }
    });
    
    // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    document.addEventListener('blur', function(e) {
        if(isMobile() || !editMode) return;
        if(e.target.classList.contains('item-price')) {
            saveAndBroadcast();
            showStatus('âœ… Fiyat gÃ¼ncellendi!', 'success');
        }
    }, true);
});

// ===== Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ =====
window.onload = function() {
    console.log("ğŸš€ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¯Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„...");
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    const savedLang = localStorage.getItem('language') || 'tr';
    document.getElementById('body').setAttribute('data-language', savedLang);
    document.getElementById('langToggle').innerText = savedLang === 'tr' ? 'TR' : 'EN';
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    loadSavedNames();
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ©
    applyLanguage(savedLang);
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
    const savedTheme = localStorage.getItem('theme');
    if(savedTheme === 'day') {
        document.getElementById('body').classList.remove('night-mode');
        document.getElementById('body').classList.add('day-mode');
        document.getElementById('themeToggle').innerText = 'ğŸŒ';
        console.log('â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ù…Ù„: Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ (Ø´Ù…Ø³)');
    } else {
        document.getElementById('body').classList.add('night-mode');
        document.getElementById('themeToggle').innerText = 'ğŸŒ“';
        console.log('ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ù…Ù„: Ø§Ù„Ù„ÙŠÙ„ÙŠ (Ù‚Ù…Ø±)');
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Supabase
    supabase.from('settings').select('*').eq('id', 1).single().then(({ data }) => {
        if(data) {
            if(data.menu_data) document.getElementById('menu').innerHTML = data.menu_data;
            if(data.instagram) document.getElementById('instaLink').href = data.instagram;
            if(data.location) document.getElementById('mapFrame').src = data.location;
            if(data.colors) {
                const colors = JSON.parse(data.colors);
                applyColorsFromData(colors);
                localStorage.setItem('colorCategory', colors.category);
                localStorage.setItem('colorName', colors.name);
                localStorage.setItem('colorPrice', colors.price);
                localStorage.setItem('colorButton', colors.button);
            }
            if(data.category_names) {
                categoryNames = JSON.parse(data.category_names);
                localStorage.setItem('categoryNames', JSON.stringify(categoryNames));
            }
            if(data.product_names) {
                productNames = JSON.parse(data.product_names);
                localStorage.setItem('productNames', JSON.stringify(productNames));
            }
            applyLanguage(savedLang);
        }
    }).catch(err => console.log("Supabase yÃ¼kleme hatasÄ±:", err));
    
    if(!isMobile()) {
        updateCategorySelect();
        loadColors();
    }
};
</script>

</body>
</html>
