<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tosttoo | Bulut Senkronizasyon</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            color: white;
            min-height: 100vh;
        }
        
        body.light-mode {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            color: #333;
        }
        
        body.light-mode .card {
            background: white;
            border: 1px solid #ddd;
        }
        
        body.light-mode .card h3 {
            color: #ff6b00;
        }
        
        body.light-mode .name {
            color: #ff6b00;
        }
        
        body.light-mode .price {
            color: #333;
        }
        
        body.light-mode .contact {
            background: #333;
            color: white;
        }
        
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1600') center/cover;
        }
        
        .hero h1 {
            font-size: 4rem;
            color: #ff6b00;
            margin-bottom: 1rem;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        
        .work-time {
            font-size: 1.5rem;
            color: #ff6b00;
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .btn {
            padding: 1rem 2rem;
            background: #ff6b00;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.3s;
            margin: 0.5rem;
        }
        
        .btn:hover {
            transform: scale(1.1);
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 1rem;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-cloud {
            background: #0066cc;
        }
        
        .btn-cloud:hover {
            background: #0052a3;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 2rem;
        }
        
        h2 {
            text-align: center;
            font-size: 2.5rem;
            color: #ff6b00;
            margin-bottom: 3rem;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            transition: transform 0.3s;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-10px);
        }
        
        .card h3 {
            color: #ff6b00;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            text-align: center;
            border-bottom: 2px solid #ff6b00;
            padding-bottom: 0.5rem;
        }
        
        .item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed rgba(255,107,0,0.3);
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .item:hover {
            background: rgba(255,107,0,0.1);
        }
        
        .delete-mode .item:hover {
            background: rgba(220,53,69,0.3);
            outline: 2px solid #dc3545;
        }
        
        .edit-mode .item:hover {
            background: rgba(40,167,69,0.3);
            outline: 2px solid #28a745;
        }
        
        .name {
            color: #ff6b00;
            font-weight: 500;
        }
        
        .price {
            font-weight: bold;
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .delete-category {
            background: #dc3545;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        
        .delete-category:hover {
            transform: scale(1.1);
        }
        
        .control-buttons {
            position: fixed;
            top: 20px;
            right: 90px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: #ff6b00;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .control-btn:hover {
            transform: scale(1.1);
        }
        
        #modeToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: #ff6b00;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.3s;
        }
        
        #modeToggle:hover {
            transform: scale(1.1) rotate(15deg);
        }
        
        .live-badge {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #ff0000;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: bold;
            z-index: 1000;
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .cloud-badge {
            position: fixed;
            top: 80px;
            left: 20px;
            background: #0066cc;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: bold;
            z-index: 1000;
            font-size: 12px;
        }
        
        .control-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background: #1a1a1a;
            border: 2px solid #ff6b00;
            border-radius: 15px;
            padding: 2rem;
            z-index: 2000;
            display: none;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .control-panel h3 {
            color: #ff6b00;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        
        .panel-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }
        
        .panel-section h4 {
            color: #ff6b00;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .panel-section input,
        .panel-section select {
            width: 100%;
            padding: 0.8rem;
            margin: 0.5rem 0;
            border: 1px solid #ff6b00;
            border-radius: 5px;
            background: #333;
            color: white;
            font-size: 1rem;
        }
        
        .panel-section button {
            width: 100%;
            padding: 0.8rem;
            margin: 0.5rem 0;
            border: none;
            border-radius: 5px;
            background: #ff6b00;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }
        
        .panel-section button:hover {
            background: #ff8533;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
        }
        
        .button-group button {
            flex: 1;
        }
        
        .close-btn {
            background: #666 !important;
            margin-top: 1rem;
        }
        
        .close-btn:hover {
            background: #888 !important;
        }
        
        .status-message {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 1rem;
            border-radius: 5px;
            background: #333;
            color: white;
            border-left: 4px solid #ff6b00;
            z-index: 1500;
            animation: slideIn 0.3s;
            max-width: 300px;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .status-success {
            border-left-color: #28a745;
        }
        
        .status-error {
            border-left-color: #dc3545;
        }
        
        .status-loading {
            border-left-color: #0066cc;
        }
        
        .double-tap-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,107,0,0.3);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 12px;
            backdrop-filter: blur(5px);
            border: 1px solid #ff6b00;
            animation: fadeInOut 3s ease-in-out infinite;
            white-space: nowrap;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .contact {
            background: #000;
            padding: 4rem 2rem;
            text-align: center;
        }
        
        .contact h2 {
            color: #ff6b00;
            margin-bottom: 2rem;
        }
        
        .contact p {
            margin: 1rem 0;
            font-size: 1.2rem;
        }
        
        .contact a {
            color: #ff6b00;
            text-decoration: none;
        }
        
        iframe {
            width: 100%;
            height: 300px;
            border: none;
            border-radius: 10px;
            margin-top: 2rem;
        }
        
        .version-tag {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
        }
        
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 40px;
            }
            .double-tap-hint {
                font-size: 10px;
                bottom: 10px;
            }
            .control-panel {
                width: 95%;
                padding: 1rem;
            }
        }
    </style>
</head>
<body class="dark-mode" id="body">

<!-- ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± -->
<div class="live-badge">üî¥ CANLI</div>
<div class="cloud-badge" id="cloudStatus">‚òÅÔ∏è Bulut: Baƒülƒ±</div>
<div class="version-tag" id="versionTag">v1.0.0</div>

<!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
<div class="control-buttons">
    <button class="control-btn" id="langBtn">üáπüá∑</button>
</div>
<button id="modeToggle">üåô</button>

<!-- ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä -->
<section class="hero">
    <h1 id="mainTitle">Tosttoo</h1>
    <div class="double-tap-hint">üëÜüëÜ √áƒ∞FT TIKLA (Y√ñNETƒ∞M)</div>
    <div class="work-time">üïí 08:00 - 02:30</div>
    <button class="btn" onclick="scrollToMenu()">Men√ºy√º G√∂r</button>
</section>

<!-- ÿßŸÑŸÖŸÜŸäŸà -->
<section class="container" id="menu">
    <h2 id="menuTitle">Men√º</h2>
    <div class="menu-grid" id="menuGrid"></div>
</section>

<!-- ŸÇÿ≥ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
<section class="contact">
    <h2 id="contactTitle">ƒ∞leti≈üim</h2>
    <p>üìû <a href="tel:05321580207">0532 158 02 07</a></p>
    <p>üì∑ <a id="instaLink" href="https://www.instagram.com/tosttooyevski" target="_blank">@tosttooyevski</a></p>
    <iframe id="mapFrame" src="https://www.google.com/maps?q=36.484479,32.101147&output=embed"></iframe>
</section>

<!-- ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
<div class="control-panel" id="controlPanel">
    <h3>‚öôÔ∏è Y√ñNETƒ∞M PANELƒ∞</h3>
    
    <!-- Cloud Senkronizasyon -->
    <div class="panel-section" style="border: 1px solid #0066cc;">
        <h4>‚òÅÔ∏è BULUT SENKRONƒ∞ZASYON</h4>
        <div class="button-group">
            <button onclick="saveToCloud()" class="btn-cloud">‚òÅÔ∏è Buluta Kaydet</button>
            <button onclick="loadFromCloud()" class="btn-cloud">üì• Buluttan Y√ºkle</button>
        </div>
        <div class="button-group" style="margin-top:5px;">
            <button onclick="copyBackupCode()" class="btn-success">üìã Yedek Kodu Kopyala</button>
            <button onclick="pasteBackupCode()" class="btn-success">üìã Yedek Kodu Yapƒ±≈ütƒ±r</button>
        </div>
        <small style="color:#aaa; display:block; margin-top:5px;">Son kayƒ±t: <span id="lastCloudSave">-</span></small>
    </div>
    
    <!-- ŸÇÿ≥ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ -->
    <div class="panel-section">
        <h4>‚ûï √úr√ºn Ekle</h4>
        <select id="categorySelect"></select>
        <input type="text" id="productName" placeholder="√úr√ºn Adƒ±">
        <input type="text" id="productPrice" placeholder="Fiyat (√∂rn: 60‚Ç∫)">
        <button onclick="addProduct()" class="btn-success">√úr√ºn Ekle</button>
    </div>
    
    <!-- ŸÇÿ≥ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿµŸÜŸäŸÅ -->
    <div class="panel-section">
        <h4>üìÅ Kategori Ekle</h4>
        <input type="text" id="categoryName" placeholder="Kategori Adƒ±">
        <button onclick="addCategory()" class="btn-success">Kategori Ekle</button>
    </div>
    
    <!-- ŸÇÿ≥ŸÖ ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ™ÿπÿØŸäŸÑ -->
    <div class="panel-section">
        <h4>üîß Ara√ßlar</h4>
        <div class="button-group">
            <button onclick="toggleDeleteMode()" id="deleteModeBtn" class="btn-danger">üóëÔ∏è Silme Modu</button>
            <button onclick="toggleEditMode()" id="editModeBtn" class="btn-success">‚úèÔ∏è D√ºzenle</button>
        </div>
        <button onclick="deleteAllCategories()" class="btn-danger" style="margin-top:10px;">‚ö†Ô∏è T√ºm Kategorileri Sil</button>
        <button onclick="resetToDefault()" class="btn-warning" style="margin-top:10px; background:#ffc107; color:#000;">üîÑ Varsayƒ±lana D√∂n</button>
    </div>
    
    <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ -->
    <div class="panel-section">
        <h4>‚öôÔ∏è Ayarlar</h4>
        <input type="text" id="newInstagram" placeholder="Instagram Link">
        <button onclick="updateInstagram()">G√ºncelle</button>
        <input type="text" id="newLocation" placeholder="Konum (√∂rn: 36.484479,32.101147)">
        <button onclick="updateLocation()">G√ºncelle</button>
    </div>
    
    <button onclick="closePanel()" class="close-btn">‚ùå Kapat</button>
</div>

<!-- ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑÿ© -->
<div id="statusMessage" class="status-message" style="display: none;"></div>

<script>
// ===== ÿßŸÑŸÖŸÜŸäŸà ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä =====
const DEFAULT_MENU = [
    {
        category: "Tostlar",
        items: [
            { name: "Ka≈üarlƒ± Tost", price: "60‚Ç∫" },
            { name: "Sucuklu Tost", price: "75‚Ç∫" },
            { name: "Karƒ±≈üƒ±k Tost", price: "85‚Ç∫" },
            { name: "Izgara Tost", price: "80‚Ç∫" },
            { name: "Tavuklu Tost", price: "90‚Ç∫" }
        ]
    },
    {
        category: "ƒ∞√ßecekler",
        items: [
            { name: "√áay", price: "10‚Ç∫" },
            { name: "Kahve", price: "15‚Ç∫" },
            { name: "Ayran", price: "12‚Ç∫" },
            { name: "Kola", price: "20‚Ç∫" },
            { name: "Fanta", price: "20‚Ç∫" },
            { name: "Su", price: "5‚Ç∫" }
        ]
    },
    {
        category: "Tatlƒ±lar",
        items: [
            { name: "K√ºnefe", price: "70‚Ç∫" },
            { name: "S√ºtla√ß", price: "30‚Ç∫" },
            { name: "Baklava", price: "40‚Ç∫" },
            { name: "Dondurma", price: "25‚Ç∫" }
        ]
    },
    {
        category: "Soƒüuk i√ßecek",
        items: [
            { name: "Cola", price: "93‚Ç∫" },
            { name: "Churchill", price: "90‚Ç∫" },
            { name: "Sprite", price: "89‚Ç∫" }
        ]
    },
    {
        category: "Sƒ±cak i√ßecekler",
        items: [
            { name: "latte", price: "125‚Ç∫" },
            { name: "√ßay", price: "123‚Ç∫" },
            { name: "cappucino", price: "95‚Ç∫" }
        ]
    }
];

// ===== ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿπÿßŸÖÿ© =====
let isAdmin = false;
let deleteMode = false;
let editMode = false;
let currentVersion = localStorage.getItem('menuVersion') || '1.0.0';
let lastCloudData = null;

// ===== ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜŸäŸà ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ© =====
window.addEventListener('load', function() {
    loadMenu();
    loadSettings();
    startCloudSync();
    updateVersion();
});

// ===== ÿ®ÿØÿ° ŸÖÿ≤ÿßŸÖŸÜÿ© ÿßŸÑÿ≥ÿ≠ÿßÿ® =====
function startCloudSync() {
    // ŸÉŸÑ 10 ÿ´ŸàÿßŸÜŸä ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™
    setInterval(() => {
        checkCloudUpdates();
    }, 10000);
}

// ===== ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÅŸä ÿßŸÑÿ≥ÿ≠ÿßÿ® =====
async function checkCloudUpdates() {
    try {
        const response = await fetch('https://api.npoint.io/2b9acf08c13ba5b3b27a');
        const data = await response.json();
        
        if (data.menu && data.menu.length > 0) {
            if (JSON.stringify(data) !== JSON.stringify(lastCloudData)) {
                lastCloudData = data;
                displayMenu(data.menu);
                document.getElementById('cloudStatus').innerHTML = '‚òÅÔ∏è Bulut: G√ºncellendi';
                document.getElementById('cloudStatus').style.background = '#28a745';
                showStatus('üîÑ Men√º g√ºncellendi!', 'success');
                
                // Yerel depolamaya da kaydet
                localStorage.setItem('tosttoo_menu', JSON.stringify(data.menu));
            }
        }
        document.getElementById('cloudStatus').innerHTML = '‚òÅÔ∏è Bulut: Baƒülƒ±';
        document.getElementById('cloudStatus').style.background = '#0066cc';
    } catch(error) {
        document.getElementById('cloudStatus').innerHTML = '‚òÅÔ∏è Bulut: Baƒülantƒ± Yok';
        document.getElementById('cloudStatus').style.background = '#dc3545';
    }
}

// ===== Buluta kaydet (HERKES G√ñRECEK) =====
async function saveToCloud() {
    showStatus('‚òÅÔ∏è Buluta kaydediliyor...', 'loading');
    
    const menu = getCurrentMenu();
    const saveData = {
        menu: menu,
        version: incrementVersion(currentVersion),
        lastUpdate: new Date().toISOString()
    };
    
    try {
        const response = await fetch('https://api.npoint.io/2b9acf08c13ba5b3b27a', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(saveData)
        });
        
        if (response.ok) {
            currentVersion = saveData.version;
            localStorage.setItem('menuVersion', currentVersion);
            document.getElementById('versionTag').textContent = 'v' + currentVersion;
            document.getElementById('lastCloudSave').textContent = new Date().toLocaleTimeString();
            
            showStatus('‚úÖ Buluta kaydedildi! Herkes g√∂recek!', 'success');
            
            // Yerel depolamaya da kaydet
            localStorage.setItem('tosttoo_menu', JSON.stringify(menu));
            localStorage.setItem('tosttoo_cloud_backup', JSON.stringify(saveData));
        } else {
            throw new Error('Kayƒ±t ba≈üarƒ±sƒ±z');
        }
    } catch(error) {
        showStatus('‚ùå Kayƒ±t ba≈üarƒ±sƒ±z! Yedek kodu kullan.', 'error');
    }
}

// ===== Buluttan y√ºkle =====
async function loadFromCloud() {
    showStatus('üì• Buluttan y√ºkleniyor...', 'loading');
    
    try {
        const response = await fetch('https://api.npoint.io/2b9acf08c13ba5b3b27a');
        const data = await response.json();
        
        if (data.menu && data.menu.length > 0) {
            displayMenu(data.menu);
            localStorage.setItem('tosttoo_menu', JSON.stringify(data.menu));
            showStatus('‚úÖ Buluttan y√ºklendi!', 'success');
        }
    } catch(error) {
        showStatus('‚ùå Y√ºkleme ba≈üarƒ±sƒ±z!', 'error');
    }
}

// ===== Yedek kodu kopyala =====
function copyBackupCode() {
    const menu = getCurrentMenu();
    const backupData = {
        menu: menu,
        version: currentVersion,
        date: new Date().toISOString()
    };
    
    const jsonString = JSON.stringify(backupData, null, 2);
    
    navigator.clipboard.writeText(jsonString).then(() => {
        showStatus('üìã Yedek kodu kopyalandƒ±!', 'success');
    }).catch(() => {
        prompt('Kodu kopyala:', jsonString);
    });
}

// ===== Yedek kodu yapƒ±≈ütƒ±r =====
function pasteBackupCode() {
    const code = prompt('Yedek kodunu yapƒ±≈ütƒ±r:');
    if (!code) return;
    
    try {
        const data = JSON.parse(code);
        if (data.menu && data.menu.length > 0) {
            displayMenu(data.menu);
            localStorage.setItem('tosttoo_menu', JSON.stringify(data.menu));
            showStatus('‚úÖ Yedek kodu y√ºklendi!', 'success');
        }
    } catch(error) {
        showStatus('‚ùå Ge√ßersiz kod!', 'error');
    }
}

// ===== Versiyon numarasƒ±nƒ± artƒ±r =====
function incrementVersion(version) {
    const parts = version.split('.');
    parts[2] = (parseInt(parts[2]) + 1).toString();
    return parts.join('.');
}

// ===== Versiyonu g√ºncelle =====
function updateVersion() {
    document.getElementById('versionTag').textContent = 'v' + currentVersion;
}

// ===== Men√ºy√º y√ºkle =====
function loadMenu() {
    const savedMenu = localStorage.getItem('tosttoo_menu');
    if (savedMenu) {
        displayMenu(JSON.parse(savedMenu));
    } else {
        displayMenu(DEFAULT_MENU);
    }
}

// ===== Men√ºy√º g√∂ster =====
function displayMenu(menuData) {
    const menuGrid = document.getElementById('menuGrid');
    menuGrid.innerHTML = '';
    
    menuData.forEach((category, catIndex) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.setAttribute('data-category-index', catIndex);
        
        const header = document.createElement('div');
        header.className = 'category-header';
        header.innerHTML = `<h3>${category.category}</h3>`;
        
        if (isAdmin) {
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-category';
            deleteBtn.innerHTML = '‚úï';
            deleteBtn.onclick = (e) => {
                e.stopPropagation();
                deleteCategory(catIndex);
            };
            header.appendChild(deleteBtn);
        }
        
        card.appendChild(header);
        
        category.items.forEach((item, itemIndex) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'item';
            itemDiv.setAttribute('data-category', catIndex);
            itemDiv.setAttribute('data-item', itemIndex);
            itemDiv.innerHTML = `<span class="name">${item.name}</span><span class="price">${item.price}</span>`;
            
            itemDiv.addEventListener('click', function(e) {
                if (deleteMode && isAdmin) {
                    e.stopPropagation();
                    deleteProduct(catIndex, itemIndex);
                } else if (editMode && isAdmin) {
                    e.stopPropagation();
                    editProduct(catIndex, itemIndex);
                }
            });
            
            card.appendChild(itemDiv);
        });
        
        menuGrid.appendChild(card);
    });
    
    updateCategorySelect();
}

// ===== Kategori sil =====
function deleteCategory(catIndex) {
    if (!isAdmin) return;
    
    if (confirm('Bu kategoriyi silmek istediƒüinize emin misiniz?')) {
        const menu = getCurrentMenu();
        menu.splice(catIndex, 1);
        saveMenu(menu);
        showStatus('‚úÖ Kategori silindi!', 'success');
    }
}

// ===== √úr√ºn sil =====
function deleteProduct(catIndex, itemIndex) {
    if (!isAdmin) return;
    
    if (confirm('Bu √ºr√ºn√º silmek istediƒüinize emin misiniz?')) {
        const menu = getCurrentMenu();
        menu[catIndex].items.splice(itemIndex, 1);
        saveMenu(menu);
        showStatus('‚úÖ √úr√ºn silindi!', 'success');
    }
}

// ===== D√ºzenleme modu =====
function toggleEditMode() {
    if (!isAdmin) return;
    
    editMode = !editMode;
    deleteMode = false;
    const btn = document.getElementById('editModeBtn');
    const grid = document.getElementById('menuGrid');
    
    if (editMode) {
        btn.style.background = '#28a745';
        btn.textContent = '‚úèÔ∏è D√ºzenleme Aktif';
        grid.classList.add('edit-mode');
        grid.classList.remove('delete-mode');
        document.getElementById('deleteModeBtn').style.background = '#dc3545';
        document.getElementById('deleteModeBtn').textContent = 'üóëÔ∏è Silme Modu';
        showStatus('‚úèÔ∏è D√ºzenleme modu aktif! √úr√ºnlere tƒ±klayƒ±n', 'success');
    } else {
        btn.style.background = '#28a745';
        btn.textContent = '‚úèÔ∏è D√ºzenle';
        grid.classList.remove('edit-mode');
    }
}

// ===== √úr√ºn d√ºzenle =====
function editProduct(catIndex, itemIndex) {
    if (!isAdmin || !editMode) return;
    
    const menu = getCurrentMenu();
    const product = menu[catIndex].items[itemIndex];
    
    const newName = prompt('Yeni √ºr√ºn adƒ±:', product.name);
    if (newName === null) return;
    
    const newPrice = prompt('Yeni fiyat:', product.price);
    if (newPrice === null) return;
    
    menu[catIndex].items[itemIndex] = { name: newName, price: newPrice };
    saveMenu(menu);
    showStatus('‚úÖ √úr√ºn g√ºncellendi!', 'success');
}

// ===== T√ºm kategorileri sil =====
function deleteAllCategories() {
    if (!isAdmin) return;
    
    if (confirm('T√úM kategoriler silinsin mi? Bu i≈ülem geri alƒ±namaz!')) {
        saveMenu([]);
        showStatus('üóëÔ∏è T√ºm kategoriler silindi!', 'success');
    }
}

// ===== Varsayƒ±lana d√∂n =====
function resetToDefault() {
    if (!isAdmin) return;
    
    if (confirm('Varsayƒ±lan men√ºye d√∂nmek istediƒüinize emin misiniz?')) {
        saveMenu(DEFAULT_MENU);
        showStatus('üîÑ Varsayƒ±lan men√º y√ºklendi!', 'success');
    }
}

// ===== Mevcut men√ºy√º al =====
function getCurrentMenu() {
    const menu = [];
    document.querySelectorAll('.card').forEach(card => {
        const category = card.querySelector('h3').textContent;
        const items = [];
        card.querySelectorAll('.item').forEach(item => {
            items.push({
                name: item.querySelector('.name').textContent,
                price: item.querySelector('.price').textContent
            });
        });
        menu.push({ category, items });
    });
    return menu;
}

// ===== Men√ºy√º kaydet =====
function saveMenu(menu) {
    localStorage.setItem('tosttoo_menu', JSON.stringify(menu));
    displayMenu(menu);
    showStatus('üíæ Men√º kaydedildi!', 'success');
}

// ===== Kategori se√ßiciyi g√ºncelle =====
function updateCategorySelect() {
    const select = document.getElementById('categorySelect');
    select.innerHTML = '';
    document.querySelectorAll('.card h3').forEach((h3, i) => {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = h3.textContent;
        select.appendChild(option);
    });
}

// ===== √úr√ºn ekle =====
function addProduct() {
    if (!isAdmin) return;
    
    const name = document.getElementById('productName').value.trim();
    const price = document.getElementById('productPrice').value.trim();
    const catIndex = document.getElementById('categorySelect').value;
    
    if (!name || !price) {
        showStatus('‚ùå √úr√ºn adƒ± ve fiyat girin!', 'error');
        return;
    }
    
    const menu = getCurrentMenu();
    menu[catIndex].items.push({ name, price });
    saveMenu(menu);
    
    document.getElementById('productName').value = '';
    document.getElementById('productPrice').value = '';
    showStatus('‚úÖ √úr√ºn eklendi!', 'success');
}

// ===== Kategori ekle =====
function addCategory() {
    if (!isAdmin) return;
    
    const name = document.getElementById('categoryName').value.trim();
    if (!name) {
        showStatus('‚ùå Kategori adƒ± girin!', 'error');
        return;
    }
    
    const menu = getCurrentMenu();
    menu.push({ category: name, items: [] });
    saveMenu(menu);
    
    document.getElementById('categoryName').value = '';
    showStatus('‚úÖ Kategori eklendi!', 'success');
}

// ===== Silme modu =====
function toggleDeleteMode() {
    if (!isAdmin) return;
    
    deleteMode = !deleteMode;
    editMode = false;
    const btn = document.getElementById('deleteModeBtn');
    const grid = document.getElementById('menuGrid');
    
    if (deleteMode) {
        btn.style.background = '#dc3545';
        btn.textContent = 'üóëÔ∏è Silme Aktif';
        grid.classList.add('delete-mode');
        grid.classList.remove('edit-mode');
        document.getElementById('editModeBtn').style.background = '#28a745';
        document.getElementById('editModeBtn').textContent = '‚úèÔ∏è D√ºzenle';
        showStatus('üóëÔ∏è Silme modu aktif! √úr√ºnlere tƒ±klayƒ±n', 'success');
    } else {
        btn.style.background = '#dc3545';
        btn.textContent = 'üóëÔ∏è Silme Modu';
        grid.classList.remove('delete-mode');
    }
}

// ===== Admin giri≈üi =====
function openAdminPanel() {
    const pass = prompt('üîê Y√∂netici ≈üifresi:');
    if (pass === 'momotunc0702') {
        isAdmin = true;
        document.getElementById('controlPanel').style.display = 'block';
        showStatus('‚úÖ Ho≈ü geldiniz!', 'success');
        loadMenu();
    } else {
        showStatus('‚ùå Yanlƒ±≈ü ≈üifre!', 'error');
    }
}

// ===== √áift tƒ±klama =====
let clickCount = 0;
document.getElementById('mainTitle').addEventListener('click', function() {
    clickCount++;
    setTimeout(() => clickCount = 0, 300);
    if (clickCount === 2) {
        openAdminPanel();
    }
});

// ===== F5 =====
document.addEventListener('keydown', function(e) {
    if (e.key === 'F5') {
        e.preventDefault();
        openAdminPanel();
    }
});

// ===== Paneli kapat =====
function closePanel() {
    document.getElementById('controlPanel').style.display = 'none';
    isAdmin = false;
    deleteMode = false;
    editMode = false;
    document.getElementById('menuGrid').classList.remove('delete-mode', 'edit-mode');
    loadMenu();
}

// ===== Instagram g√ºncelle =====
function updateInstagram() {
    if (!isAdmin) return;
    const val = document.getElementById('newInstagram').value.trim();
    if (val) {
        document.getElementById('instaLink').href = val;
        localStorage.setItem('insta', val);
        showStatus('‚úÖ Instagram g√ºncellendi!', 'success');
    }
}

// ===== Konum g√ºncelle =====
function updateLocation() {
    if (!isAdmin) return;
    const val = document.getElementById('newLocation').value.trim();
    if (val) {
        document.getElementById('mapFrame').src = `https://www.google.com/maps?q=${val}&output=embed`;
        localStorage.setItem('map', val);
        showStatus('üìç Konum g√ºncellendi!', 'success');
    }
}

// ===== Ayarlarƒ± y√ºkle =====
function loadSettings() {
    if (localStorage.getItem('insta')) {
        document.getElementById('instaLink').href = localStorage.getItem('insta');
    }
    if (localStorage.getItem('map')) {
        document.getElementById('mapFrame').src = `https://www.google.com/maps?q=${localStorage.getItem('map')}&output=embed`;
    }
    if (localStorage.getItem('theme') === 'light') {
        document.body.classList.add('light-mode');
        modeToggle.innerHTML = '‚òÄÔ∏è';
    }
    if (localStorage.getItem('lang')) {
        currentLang = localStorage.getItem('lang');
        applyLanguage();
    }
}

// ===== Mesaj g√∂ster =====
function showStatus(msg, type) {
    const status = document.getElementById('statusMessage');
    status.textContent = msg;
    status.className = `status-message status-${type}`;
    status.style.display = 'block';
    setTimeout(() => status.style.display = 'none', 2000);
}

// ===== Men√ºye kaydƒ±r =====
function scrollToMenu() {
    document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
}

// ===== Dil =====
let currentLang = localStorage.getItem('lang') || 'tr';

function toggleLanguage() {
    currentLang = currentLang === 'tr' ? 'en' : 'tr';
    localStorage.setItem('lang', currentLang);
    applyLanguage();
}

function applyLanguage() {
    const langBtn = document.getElementById('langBtn');
    langBtn.textContent = currentLang === 'tr' ? 'üáπüá∑' : 'üá¨üáß';
    
    if (currentLang === 'tr') {
        document.getElementById('menuTitle').textContent = 'Men√º';
        document.getElementById('contactTitle').textContent = 'ƒ∞leti≈üim';
        document.querySelector('.btn').textContent = 'Men√ºy√º G√∂r';
    } else {
        document.getElementById('menuTitle').textContent = 'Menu';
        document.getElementById('contactTitle').textContent = 'Contact';
        document.querySelector('.btn').textContent = 'View Menu';
    }
}

// ===== Tema =====
const modeToggle = document.getElementById('modeToggle');
modeToggle.addEventListener('click', function() {
    document.body.classList.toggle('light-mode');
    const isLight = document.body.classList.contains('light-mode');
    modeToggle.innerHTML = isLight ? '‚òÄÔ∏è' : 'üåô';
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
});

// ===== Dil butonu =====
document.getElementById('langBtn').onclick = toggleLanguage;

// ===== Ba≈ülangƒ±√ß =====
applyLanguage();
</script>

</body>
</html>
